{"version":3,"file":"http-component.js","sources":["../src/http-message.js","../src/http-request.js","../src/http-response.js","../src/http-transaction.js","../src/http-interceptor.js","../src/http-waterfall.js"],"sourcesContent":["/**\n * Inline CSS styles for http-message component\n * @const {string}\n */\nconst HTTP_MESSAGE_STYLES = `\n:host {\n  display: block;\n  font-family: 'Courier New', Courier, monospace;\n  font-size: 14px;\n  line-height: 1.5;\n\n  /* Light mode colors (default) */\n  --bg-primary: #f5f5f5;\n  --bg-secondary: white;\n  --border-color: #ddd;\n  --text-primary: #1f2937;\n  --text-secondary: #64748b;\n  --text-empty: #9ca3af;\n\n  /* Syntax highlighting */\n  --header-name: #0066cc;\n  --header-value: #334155;\n  --mime-type-bg: #f3e8ff;\n  --mime-type-text: #7c3aed;\n\n  /* JSON colors */\n  --json-key: #0066cc;\n  --json-string: #22863a;\n  --json-number: #005cc5;\n  --json-boolean: #6f42c1;\n  --json-null: #6a737d;\n  --json-error-bg: #ffeef0;\n  --json-error-text: #d73a49;\n\n  /* HTML colors */\n  --html-tag: #2563eb;\n  --html-attr: #059669;\n  --html-value: #7c3aed;\n  --html-comment: #6a737d;\n\n  /* CSS colors */\n  --css-selector: #2563eb;\n  --css-property: #059669;\n  --css-value: #7c3aed;\n  --css-comment: #6a737d;\n\n  /* JS colors */\n  --js-keyword: #7c3aed;\n  --js-string: #22863a;\n  --js-number: #005cc5;\n  --js-comment: #6a737d;\n}\n\n/* Dark mode */\n:host([theme=\"dark\"]) {\n  --bg-primary: #1f2937;\n  --bg-secondary: #111827;\n  --border-color: #374151;\n  --text-primary: #f3f4f6;\n  --text-secondary: #9ca3af;\n  --text-empty: #6b7280;\n\n  /* Syntax highlighting - adjusted for dark backgrounds */\n  --header-name: #60a5fa;\n  --header-value: #d1d5db;\n  --mime-type-bg: #581c87;\n  --mime-type-text: #e9d5ff;\n\n  /* JSON colors - brighter for dark mode */\n  --json-key: #60a5fa;\n  --json-string: #6ee7b7;\n  --json-number: #93c5fd;\n  --json-boolean: #c4b5fd;\n  --json-null: #9ca3af;\n  --json-error-bg: #7f1d1d;\n  --json-error-text: #fca5a5;\n\n  /* HTML colors */\n  --html-tag: #60a5fa;\n  --html-attr: #34d399;\n  --html-value: #c4b5fd;\n  --html-comment: #9ca3af;\n\n  /* CSS colors */\n  --css-selector: #60a5fa;\n  --css-property: #34d399;\n  --css-value: #c4b5fd;\n  --css-comment: #9ca3af;\n\n  /* JS colors */\n  --js-keyword: #c4b5fd;\n  --js-string: #6ee7b7;\n  --js-number: #93c5fd;\n  --js-comment: #9ca3af;\n}\n\n.http-message {\n  padding: 0;\n  color: var(--text-primary);\n}\n\n.http-message pre {\n  margin: 0;\n  padding: 0;\n  font-family: 'Courier New', Courier, monospace;\n  font-size: 13px;\n  line-height: 1.6;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  color: var(--text-primary);\n}\n\n.empty {\n  color: var(--text-empty);\n  font-style: italic;\n  padding: 8px 0;\n}\n\n.http-header-name {\n  color: var(--header-name);\n  font-weight: 600;\n}\n\n.mime-type {\n  color: var(--mime-type-text);\n  font-weight: 700;\n  background: var(--mime-type-bg);\n  padding: 1px 4px;\n  border-radius: 2px;\n}\n\n.http-header-value {\n  color: var(--header-value);\n}\n\n/* JSON Syntax Highlighting */\n.json-key {\n  color: var(--json-key);\n  font-weight: 600;\n}\n\n.json-string {\n  color: var(--json-string);\n}\n\n.json-number {\n  color: var(--json-number);\n}\n\n.json-boolean {\n  color: var(--json-boolean);\n  font-weight: 600;\n}\n\n.json-null {\n  color: var(--json-null);\n  font-style: italic;\n}\n\n.json-error {\n  color: var(--json-error-text);\n  font-weight: 600;\n  background: var(--json-error-bg);\n  padding: 2px 6px;\n  border-radius: 3px;\n  margin-right: 8px;\n}\n\n/* HTML Syntax Highlighting */\n.html-tag {\n  color: var(--html-tag);\n}\n\n.html-attr {\n  color: var(--html-attr);\n}\n\n.html-value {\n  color: var(--html-value);\n}\n\n.html-comment {\n  color: var(--html-comment);\n  font-style: italic;\n}\n\n/* CSS Syntax Highlighting */\n.css-selector {\n  color: var(--css-selector);\n  font-weight: 600;\n}\n\n.css-property {\n  color: var(--css-property);\n}\n\n.css-value {\n  color: var(--css-value);\n}\n\n.css-comment {\n  color: var(--css-comment);\n  font-style: italic;\n}\n\n/* JavaScript Syntax Highlighting */\n.js-keyword {\n  color: var(--js-keyword);\n  font-weight: 600;\n}\n\n.js-string {\n  color: var(--js-string);\n}\n\n.js-number {\n  color: var(--js-number);\n}\n\n.js-comment {\n  color: var(--js-comment);\n  font-style: italic;\n}\n\n/* Highlight styles for emphasized sections */\nmark.highlight {\n  background: #fff3cd;\n  color: inherit;\n  padding: 2px 0;\n  margin: -2px 0;\n  border-radius: 2px;\n  display: inline;\n  box-decoration-break: clone;\n  -webkit-box-decoration-break: clone;\n}\n\n:host([theme='dark']) mark.highlight {\n  background: #664d03;\n  border-left: 3px solid #ffc107;\n  padding-left: 6px;\n}\n\n/* Box styles for bordered sections with labels */\n.http-box {\n  position: relative;\n  border: 2px solid #2563eb;\n  border-radius: 6px;\n  padding: 20px 12px 12px 12px;\n  margin: 8px 0;\n  background: rgba(37, 99, 235, 0.02);\n}\n\n.http-box-label {\n  position: absolute;\n  top: -10px;\n  left: 12px;\n  background: var(--bg-secondary);\n  padding: 2px 8px;\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  color: #2563eb;\n  border-radius: 3px;\n  border: 2px solid #2563eb;\n}\n\n:host([theme='dark']) .http-box {\n  border-color: #60a5fa;\n  background: rgba(96, 165, 250, 0.05);\n}\n\n:host([theme='dark']) .http-box-label {\n  color: #60a5fa;\n  border-color: #60a5fa;\n}\n`;\n\n/**\n * @typedef {Object} HTTPHeaders\n * @property {Object.<string, string>} headers - HTTP headers as key-value pairs\n */\n\n/**\n * HTTPMessageElement - Base web component for displaying HTTP headers and body\n * Provides shared rendering functionality for request and response components.\n *\n * @class\n * @extends HTMLElement\n *\n * @example\n * <http-message></http-message>\n *\n * @example\n * // Set headers and body\n * const msg = document.querySelector('http-message');\n * msg.headers = { 'Content-Type': 'application/json' };\n * msg.body = '{\"key\": \"value\"}';\n */\nclass HTTPMessageElement extends HTMLElement {\n  /**\n   * Creates an instance of HTTPMessageElement\n   * @constructor\n   */\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this._headers = {};\n    this._body = null;\n    this._contentType = '';\n\n    // Handle property shadowing\n    if (this.hasOwnProperty('headers')) {\n      const existingHeaders = this.headers;\n      delete this.headers;\n      this.headers = existingHeaders;\n    }\n    if (this.hasOwnProperty('body')) {\n      const existingBody = this.body;\n      delete this.body;\n      this.body = existingBody;\n    }\n  }\n\n  /**\n   * Observed attributes for automatic re-rendering\n   * @static\n   * @returns {string[]} Array of observed attribute names\n   */\n  static get observedAttributes() {\n    return ['theme', 'highlight', 'box'];\n  }\n\n  /**\n   * Called when element is added to the DOM\n   */\n  connectedCallback() {\n    this.render();\n    this.updateTheme();\n  }\n\n  /**\n   * Called when observed attributes change\n   * @param {string} name - Attribute name\n   * @param {string} oldValue - Previous value\n   * @param {string} newValue - New value\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue !== newValue) {\n      if (name === 'theme') {\n        this.updateTheme();\n      } else {\n        this.render();\n      }\n    }\n  }\n\n  /**\n   * Update theme based on attribute or system preference\n   */\n  updateTheme() {\n    const themeAttr = this.getAttribute('theme');\n\n    if (themeAttr === 'dark' || themeAttr === 'light') {\n      this.setAttribute('theme', themeAttr);\n    } else if (themeAttr === 'auto' || !themeAttr) {\n      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n      this.setAttribute('theme', prefersDark ? 'dark' : 'light');\n    }\n  }\n\n  /**\n   * Set HTTP headers\n   * @param {Object.<string, string>} value - Headers object\n   */\n  set headers(value) {\n    this._headers = value || {};\n    this._contentType = this._headers['Content-Type'] || this._headers['content-type'] || '';\n    this.render();\n  }\n\n  /**\n   * Get HTTP headers\n   * @returns {Object.<string, string>} Headers object\n   */\n  get headers() {\n    return this._headers;\n  }\n\n  /**\n   * Set body content\n   * @param {string|null} value - Body content\n   */\n  set body(value) {\n    this._body = value;\n    this.render();\n  }\n\n  /**\n   * Get body content\n   * @returns {string|null} Body content\n   */\n  get body() {\n    return this._body;\n  }\n\n  /**\n   * Render the component\n   * @private\n   */\n  render() {\n    const headersHtml = this.renderHeaders();\n    const bodyHtml = this.renderBody();\n\n    this.shadowRoot.innerHTML = `\n      <style>${HTTP_MESSAGE_STYLES}</style>\n      <div class=\"http-message\">\n        <slot name=\"before-headers\"></slot>\n        <pre>${headersHtml}${bodyHtml ? '\\n' + bodyHtml : ''}</pre>\n        <slot name=\"after-body\"></slot>\n      </div>\n    `;\n  }\n\n  /**\n   * Render headers section\n   * @returns {string} HTML string for headers\n   * @private\n   */\n  renderHeaders() {\n    if (!this._headers || Object.keys(this._headers).length === 0) {\n      return '';\n    }\n\n    let content = '';\n    for (const [key, value] of Object.entries(this._headers)) {\n      let headerLine = `<span class=\"http-header-name\">${this.escapeHtml(key)}</span>: `;\n      if (key.toLowerCase() === 'content-type') {\n        headerLine += this.highlightContentType(value);\n      } else {\n        headerLine += `<span class=\"http-header-value\">${this.escapeHtml(value)}</span>`;\n      }\n      content += headerLine + '\\n';\n    }\n\n    return content;\n  }\n\n  /**\n   * Render body section\n   * @returns {string} HTML string for body\n   * @private\n   */\n  renderBody() {\n    if (!this._body) {\n      return '';\n    }\n\n    return this.formatBody(this._body, this._headers);\n  }\n\n  /**\n   * Escape HTML special characters\n   * @param {string} text - Text to escape\n   * @returns {string} Escaped text\n   */\n  escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  /**\n   * Highlight Content-Type header value\n   * @param {string} value - Content-Type value\n   * @returns {string} Highlighted HTML\n   */\n  highlightContentType(value) {\n    const escaped = this.escapeHtml(value);\n    const parts = escaped.split(';');\n    const mediaType = parts[0].trim();\n    const params = parts\n      .slice(1)\n      .map(p => p.trim())\n      .join('; ');\n\n    let result = `<span class=\"mime-type\">${mediaType}</span>`;\n    if (params) {\n      result += `<span class=\"http-header-value\">; ${params}</span>`;\n    }\n    return result;\n  }\n\n  /**\n   * Check if content type indicates JSON\n   * @param {Object.<string, string>} headers - HTTP headers\n   * @returns {boolean} True if JSON content type\n   */\n  isJsonContentType(headers) {\n    const contentType = headers['Content-Type'] || headers['content-type'] || '';\n    return contentType.includes('application/json') || contentType.includes('application/ld+json');\n  }\n\n  /**\n   * Check if content type is binary\n   * @param {string} contentType - Content-Type value\n   * @returns {boolean} True if binary content type\n   */\n  isBinaryContentType(contentType) {\n    const binaryTypes = [\n      'image/',\n      'video/',\n      'audio/',\n      'application/octet-stream',\n      'application/pdf',\n      'application/zip',\n      'font/',\n    ];\n    return binaryTypes.some(type => contentType.includes(type));\n  }\n\n  /**\n   * Format body with syntax highlighting\n   * @param {string} body - Body content\n   * @param {Object.<string, string>} headers - HTTP headers\n   * @returns {string} Formatted body HTML\n   */\n  formatBody(body, headers) {\n    if (!body) return '';\n\n    const contentType = headers['Content-Type'] || headers['content-type'] || '';\n    const bodyStr = typeof body === 'string' ? body : JSON.stringify(body, null, 2);\n\n    if (this.isBinaryContentType(contentType)) {\n      const size = bodyStr.length;\n      const sizeStr =\n        size < 1024\n          ? `${size} bytes`\n          : size < 1024 * 1024\n            ? `${(size / 1024).toFixed(1)} KB`\n            : `${(size / (1024 * 1024)).toFixed(1)} MB`;\n      return `<span class=\"binary-data\">\\u{1F4E6} Binary data (${this.escapeHtml(contentType.split(';')[0])}, ${sizeStr})</span>`;\n    }\n\n    if (this.isJsonContentType(headers)) {\n      try {\n        const parsed = typeof body === 'string' ? JSON.parse(body) : body;\n        return this.formatJson(parsed);\n      } catch (e) {\n        return `<span class=\"json-error\" title=\"Invalid JSON: ${this.escapeHtml(e.message)}\">\\u26A0\\uFE0F Invalid JSON</span>\\n${this.escapeHtml(bodyStr)}`;\n      }\n    }\n\n    if (contentType.includes('text/html')) {\n      return this.highlightHtml(this.escapeHtml(bodyStr));\n    }\n\n    if (contentType.includes('text/css')) {\n      return this.highlightCss(this.escapeHtml(bodyStr));\n    }\n\n    if (contentType.includes('javascript') || contentType.includes('application/x-javascript')) {\n      return this.highlightJavaScript(this.escapeHtml(bodyStr));\n    }\n\n    return this.escapeHtml(bodyStr);\n  }\n\n  /**\n   * Format JSON with syntax highlighting\n   * @param {*} obj - Object to format\n   * @param {number} indent - Indentation level\n   * @returns {string} Formatted JSON HTML\n   */\n  formatJson(obj, indent = 0) {\n    const indentStr = '  '.repeat(indent);\n    const nextIndent = '  '.repeat(indent + 1);\n\n    if (obj === null) {\n      return '<span class=\"json-null\">null</span>';\n    }\n\n    if (typeof obj === 'boolean') {\n      return `<span class=\"json-boolean\">${obj}</span>`;\n    }\n\n    if (typeof obj === 'number') {\n      return `<span class=\"json-number\">${obj}</span>`;\n    }\n\n    if (typeof obj === 'string') {\n      return `<span class=\"json-string\">\"${this.escapeHtml(obj)}\"</span>`;\n    }\n\n    if (Array.isArray(obj)) {\n      if (obj.length === 0) return '[]';\n\n      const items = obj\n        .map(item => `${nextIndent}${this.formatJson(item, indent + 1)}`)\n        .join(',\\n');\n\n      return `[\\n${items}\\n${indentStr}]`;\n    }\n\n    if (typeof obj === 'object') {\n      const keys = Object.keys(obj);\n      if (keys.length === 0) return '{}';\n\n      const items = keys\n        .map(\n          key =>\n            `${nextIndent}<span class=\"json-key\">\"${this.escapeHtml(key)}\"</span>: ${this.formatJson(obj[key], indent + 1)}`\n        )\n        .join(',\\n');\n\n      return `{\\n${items}\\n${indentStr}}`;\n    }\n\n    return String(obj);\n  }\n\n  /**\n   * Highlight HTML syntax\n   * @param {string} html - Escaped HTML code\n   * @returns {string} Highlighted HTML\n   */\n  highlightHtml(html) {\n    return html\n      .replace(/(&lt;!--[\\s\\S]*?--&gt;)/g, '<span class=\"html-comment\">$1</span>')\n      .replace(\n        /(&lt;\\/?)([\\w-]+)((?:\\s+[\\w-]+=(?:\"[^\"]*\"|'[^']*'))*\\s*)(\\/?&gt;)/g,\n        (match, open, tag, attrs, close) => {\n          const highlightedTag = `<span class=\"html-tag\">${open}${tag}</span>`;\n          const highlightedAttrs = attrs.replace(\n            /([\\w-]+)=([\"'])([^\"']*)\\2/g,\n            '<span class=\"html-attr\">$1</span>=<span class=\"html-value\">$2$3$2</span>'\n          );\n          return highlightedTag + highlightedAttrs + `<span class=\"html-tag\">${close}</span>`;\n        }\n      );\n  }\n\n  /**\n   * Highlight CSS syntax\n   * @param {string} css - Escaped CSS code\n   * @returns {string} Highlighted CSS\n   */\n  highlightCss(css) {\n    return css\n      .replace(/(\\/\\*[\\s\\S]*?\\*\\/)/g, '<span class=\"css-comment\">$1</span>')\n      .replace(/^([^{}/]+)(\\s*{)/gm, (match, selector, brace) => {\n        return `<span class=\"css-selector\">${selector}</span>${brace}`;\n      })\n      .replace(/\\b([\\w-]+)(\\s*):/g, '<span class=\"css-property\">$1</span>$2:')\n      .replace(/:\\s*([^;}\\n]+)/g, (match, value) => {\n        return ': <span class=\"css-value\">' + value + '</span>';\n      });\n  }\n\n  /**\n   * Highlight JavaScript syntax\n   * @param {string} js - Escaped JavaScript code\n   * @returns {string} Highlighted JavaScript\n   */\n  highlightJavaScript(js) {\n    const placeholders = [];\n    let result = js;\n\n    result = result.replace(/(\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|`(?:[^`\\\\]|\\\\.)*`)/g, match => {\n      const id = placeholders.length;\n      placeholders.push(`<span class=\"js-string\">${match}</span>`);\n      return `___PLACEHOLDER_${id}___`;\n    });\n\n    result = result.replace(/\\/\\/.*$/gm, match => {\n      const id = placeholders.length;\n      placeholders.push(`<span class=\"js-comment\">${match}</span>`);\n      return `___PLACEHOLDER_${id}___`;\n    });\n    result = result.replace(/\\/\\*[\\s\\S]*?\\*\\//g, match => {\n      const id = placeholders.length;\n      placeholders.push(`<span class=\"js-comment\">${match}</span>`);\n      return `___PLACEHOLDER_${id}___`;\n    });\n\n    result = result.replace(/\\b(\\d+\\.?\\d*)\\b/g, '<span class=\"js-number\">$1</span>');\n\n    const keywords =\n      /\\b(function|const|let|var|if|else|for|while|return|class|import|export|from|async|await|try|catch|throw|new|this|typeof|instanceof)\\b/g;\n    result = result.replace(keywords, '<span class=\"js-keyword\">$1</span>');\n\n    placeholders.forEach((replacement, id) => {\n      result = result.replace(`___PLACEHOLDER_${id}___`, replacement);\n    });\n\n    return result;\n  }\n}\n\n// Register the custom element\ncustomElements.define('http-message', HTTPMessageElement);\n\nexport { HTTPMessageElement, HTTP_MESSAGE_STYLES };\n","import './http-message.js';\n\n/**\n * Inline CSS styles for http-request component\n * @const {string}\n */\nconst HTTP_REQUEST_STYLES = `\n:host {\n  display: block;\n  font-family: 'Courier New', Courier, monospace;\n  font-size: 14px;\n  line-height: 1.5;\n\n  /* Light mode colors (default) */\n  --bg-primary: #f5f5f5;\n  --bg-secondary: white;\n  --bg-header: #2563eb;\n  --border-color: #ddd;\n  --text-primary: #1f2937;\n  --text-secondary: #64748b;\n  --text-empty: #9ca3af;\n\n  /* HTTP Method colors */\n  --method-get: #2563eb;\n  --method-post: #059669;\n  --method-put: #d97706;\n  --method-delete: #dc2626;\n  --method-patch: #7c3aed;\n  --method-head: #6b7280;\n  --method-options: #0891b2;\n\n  /* Syntax highlighting */\n  --url-color: #0891b2;\n  --version-color: #64748b;\n  --header-name: #0066cc;\n  --header-value: #334155;\n  --mime-type-bg: #f3e8ff;\n  --mime-type-text: #7c3aed;\n}\n\n/* Dark mode */\n:host([theme=\"dark\"]) {\n  --bg-primary: #1f2937;\n  --bg-secondary: #111827;\n  --bg-header: #3b82f6;\n  --border-color: #374151;\n  --text-primary: #f3f4f6;\n  --text-secondary: #9ca3af;\n  --text-empty: #6b7280;\n\n  /* HTTP Method colors - brighter for dark mode */\n  --method-get: #60a5fa;\n  --method-post: #34d399;\n  --method-put: #fbbf24;\n  --method-delete: #f87171;\n  --method-patch: #a78bfa;\n  --method-head: #9ca3af;\n  --method-options: #22d3ee;\n\n  /* Syntax highlighting */\n  --url-color: #22d3ee;\n  --version-color: #9ca3af;\n  --header-name: #60a5fa;\n  --header-value: #d1d5db;\n  --mime-type-bg: #581c87;\n  --mime-type-text: #e9d5ff;\n}\n\n.http-request {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.section-header {\n  background: var(--bg-header);\n  color: white;\n  padding: 8px 12px;\n  font-weight: bold;\n  font-size: 12px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.http-content {\n  padding: 16px;\n}\n\n.http-content pre {\n  margin: 0;\n  padding: 0;\n  font-family: 'Courier New', Courier, monospace;\n  font-size: 13px;\n  line-height: 1.6;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  color: var(--text-primary);\n}\n\n.empty {\n  color: var(--text-empty);\n  font-style: italic;\n  padding: 8px 0;\n}\n\n/* HTTP Method styling */\n.http-method-get { color: var(--method-get); font-weight: bold; }\n.http-method-post { color: var(--method-post); font-weight: bold; }\n.http-method-put { color: var(--method-put); font-weight: bold; }\n.http-method-delete { color: var(--method-delete); font-weight: bold; }\n.http-method-patch { color: var(--method-patch); font-weight: bold; }\n.http-method-head { color: var(--method-head); font-weight: bold; }\n.http-method-options { color: var(--method-options); font-weight: bold; }\n\n.http-url { color: var(--url-color); }\n.http-version { color: var(--version-color); }\n\n.http-header-name {\n  color: var(--header-name);\n  font-weight: 600;\n}\n\n.mime-type {\n  color: var(--mime-type-text);\n  font-weight: 700;\n  background: var(--mime-type-bg);\n  padding: 1px 4px;\n  border-radius: 2px;\n}\n\n.http-header-value {\n  color: var(--header-value);\n}\n\n/* Highlight styles */\nmark.highlight {\n  background: #fff3cd;\n  color: inherit;\n  padding: 2px 0;\n  margin: -2px 0;\n  border-radius: 2px;\n  display: inline;\n  box-decoration-break: clone;\n  -webkit-box-decoration-break: clone;\n}\n\n:host([theme='dark']) mark.highlight {\n  background: #664d03;\n  border-left: 3px solid #ffc107;\n  padding-left: 6px;\n}\n\n/* Box styles */\n.http-box {\n  position: relative;\n  border: 2px solid #2563eb;\n  border-radius: 6px;\n  padding: 20px 12px 12px 12px;\n  margin: 8px 0;\n  background: rgba(37, 99, 235, 0.02);\n}\n\n.http-box-label {\n  position: absolute;\n  top: -10px;\n  left: 12px;\n  background: var(--bg-secondary);\n  padding: 2px 8px;\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  color: #2563eb;\n  border-radius: 3px;\n  border: 2px solid #2563eb;\n}\n\n:host([theme='dark']) .http-box {\n  border-color: #60a5fa;\n  background: rgba(96, 165, 250, 0.05);\n}\n\n:host([theme='dark']) .http-box-label {\n  color: #60a5fa;\n  border-color: #60a5fa;\n}\n\n/* JSON Syntax Highlighting */\n.json-key { color: #0066cc; font-weight: 600; }\n.json-string { color: #22863a; }\n.json-number { color: #005cc5; }\n.json-boolean { color: #6f42c1; font-weight: 600; }\n.json-null { color: #6a737d; font-style: italic; }\n.json-error { color: #d73a49; font-weight: 600; background: #ffeef0; padding: 2px 6px; border-radius: 3px; }\n\n:host([theme='dark']) .json-key { color: #60a5fa; }\n:host([theme='dark']) .json-string { color: #6ee7b7; }\n:host([theme='dark']) .json-number { color: #93c5fd; }\n:host([theme='dark']) .json-boolean { color: #c4b5fd; }\n:host([theme='dark']) .json-null { color: #9ca3af; }\n:host([theme='dark']) .json-error { color: #fca5a5; background: #7f1d1d; }\n\n/* HTML Syntax Highlighting */\n.html-tag { color: #2563eb; }\n.html-attr { color: #059669; }\n.html-value { color: #7c3aed; }\n.html-comment { color: #6a737d; font-style: italic; }\n\n:host([theme='dark']) .html-tag { color: #60a5fa; }\n:host([theme='dark']) .html-attr { color: #34d399; }\n:host([theme='dark']) .html-value { color: #c4b5fd; }\n:host([theme='dark']) .html-comment { color: #9ca3af; }\n\n/* CSS Syntax Highlighting */\n.css-selector { color: #2563eb; font-weight: 600; }\n.css-property { color: #059669; }\n.css-value { color: #7c3aed; }\n.css-comment { color: #6a737d; font-style: italic; }\n\n:host([theme='dark']) .css-selector { color: #60a5fa; }\n:host([theme='dark']) .css-property { color: #34d399; }\n:host([theme='dark']) .css-value { color: #c4b5fd; }\n:host([theme='dark']) .css-comment { color: #9ca3af; }\n\n/* JavaScript Syntax Highlighting */\n.js-keyword { color: #7c3aed; font-weight: 600; }\n.js-string { color: #22863a; }\n.js-number { color: #005cc5; }\n.js-comment { color: #6a737d; font-style: italic; }\n\n:host([theme='dark']) .js-keyword { color: #c4b5fd; }\n:host([theme='dark']) .js-string { color: #6ee7b7; }\n:host([theme='dark']) .js-number { color: #93c5fd; }\n:host([theme='dark']) .js-comment { color: #9ca3af; }\n`;\n\n/**\n * @typedef {Object} HTTPRequestData\n * @property {string} method - HTTP method (GET, POST, etc.)\n * @property {string} url - Request URL\n * @property {string} [httpVersion='HTTP/1.1'] - HTTP protocol version\n * @property {Object.<string, string>} [headers={}] - Request headers\n * @property {string|null} [body=null] - Request body\n */\n\n/**\n * HTTPRequestElement - Web component for displaying HTTP requests\n * Renders request line (METHOD URL HTTP/version) followed by headers and body.\n *\n * @class\n * @extends HTMLElement\n *\n * @example\n * <http-request></http-request>\n *\n * @example\n * // Using the data property\n * const req = document.querySelector('http-request');\n * req.data = {\n *   method: 'GET',\n *   url: '/api/users',\n *   headers: { 'Accept': 'application/json' }\n * };\n */\nclass HTTPRequestElement extends HTMLElement {\n  /**\n   * Creates an instance of HTTPRequestElement\n   * @constructor\n   */\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this._data = null;\n\n    // Handle property shadowing\n    if (this.hasOwnProperty('data')) {\n      const existingData = this.data;\n      delete this.data;\n      this.data = existingData;\n    }\n  }\n\n  /**\n   * Observed attributes\n   * @static\n   * @returns {string[]} Array of observed attribute names\n   */\n  static get observedAttributes() {\n    return ['request', 'theme', 'highlight', 'box', 'show-header'];\n  }\n\n  /**\n   * Called when element is added to the DOM\n   */\n  connectedCallback() {\n    this.render();\n    this.updateTheme();\n  }\n\n  /**\n   * Called when observed attributes change\n   * @param {string} name - Attribute name\n   * @param {string} oldValue - Previous value\n   * @param {string} newValue - New value\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue !== newValue) {\n      if (name === 'theme') {\n        this.updateTheme();\n      } else {\n        this.render();\n      }\n    }\n  }\n\n  /**\n   * Update theme based on attribute or system preference\n   */\n  updateTheme() {\n    const themeAttr = this.getAttribute('theme');\n\n    if (themeAttr === 'dark' || themeAttr === 'light') {\n      this.setAttribute('theme', themeAttr);\n    } else if (themeAttr === 'auto' || !themeAttr) {\n      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n      this.setAttribute('theme', prefersDark ? 'dark' : 'light');\n    }\n  }\n\n  /**\n   * Set request data\n   * @param {HTTPRequestData} value - Request data\n   */\n  set data(value) {\n    this._data = value;\n    this.render();\n  }\n\n  /**\n   * Get request data\n   * @returns {HTTPRequestData|null} Request data\n   */\n  get data() {\n    return this._data;\n  }\n\n  /**\n   * Get data from property or attribute\n   * @returns {HTTPRequestData|null} Request data\n   * @private\n   */\n  getData() {\n    if (this._data) {\n      return this._data;\n    }\n\n    const requestAttr = this.getAttribute('request');\n    if (requestAttr) {\n      try {\n        return JSON.parse(requestAttr);\n      } catch (e) {\n        console.error('Failed to parse request:', e);\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Parse highlight attribute\n   * @returns {Object} Highlight configuration\n   * @private\n   */\n  getHighlightedSections() {\n    const highlightAttr = this.getAttribute('highlight');\n    if (!highlightAttr) {\n      return { sections: new Set(), allHeaders: false, specificHeaders: new Set() };\n    }\n\n    const sections = new Set();\n    let allHeaders = false;\n    const specificHeaders = new Set();\n\n    const parts = highlightAttr\n      .split(',')\n      .map(s => s.trim())\n      .filter(s => s.length > 0);\n\n    for (const part of parts) {\n      if (part === 'headers') {\n        allHeaders = true;\n      } else if (part.startsWith('header:')) {\n        const headerName = part.substring('header:'.length).trim().toLowerCase();\n        if (headerName) {\n          specificHeaders.add(headerName);\n        }\n      } else {\n        sections.add(part);\n      }\n    }\n\n    return { sections, allHeaders, specificHeaders };\n  }\n\n  /**\n   * Check if a section should be highlighted\n   * @param {string} section - Section name\n   * @returns {boolean} True if highlighted\n   * @private\n   */\n  isHighlighted(section) {\n    return this.getHighlightedSections().sections.has(section);\n  }\n\n  /**\n   * Check if a header should be highlighted\n   * @param {string} headerName - Header name\n   * @returns {boolean} True if highlighted\n   * @private\n   */\n  isHeaderHighlighted(headerName) {\n    const highlighted = this.getHighlightedSections();\n    return highlighted.allHeaders || highlighted.specificHeaders.has(headerName.toLowerCase());\n  }\n\n  /**\n   * Parse box attribute\n   * @returns {Object} Box configuration\n   * @private\n   */\n  getBoxedSections() {\n    const boxAttr = this.getAttribute('box');\n    if (!boxAttr) {\n      return { sections: new Set(), allHeaders: false, specificHeaders: new Set() };\n    }\n\n    const sections = new Set();\n    let allHeaders = false;\n    const specificHeaders = new Set();\n\n    const parts = boxAttr\n      .split(',')\n      .map(s => s.trim())\n      .filter(s => s.length > 0);\n\n    for (const part of parts) {\n      if (part === 'headers') {\n        allHeaders = true;\n      } else if (part.startsWith('header:')) {\n        const headerName = part.substring('header:'.length).trim().toLowerCase();\n        if (headerName) {\n          specificHeaders.add(headerName);\n        }\n      } else {\n        sections.add(part);\n      }\n    }\n\n    return { sections, allHeaders, specificHeaders };\n  }\n\n  /**\n   * Check if a section should be boxed\n   * @param {string} section - Section name\n   * @returns {boolean} True if boxed\n   * @private\n   */\n  isBoxed(section) {\n    return this.getBoxedSections().sections.has(section);\n  }\n\n  /**\n   * Render the component\n   * @private\n   */\n  render() {\n    const request = this.getData();\n    const showHeader = this.getAttribute('show-header') !== 'false';\n\n    if (!request) {\n      this.shadowRoot.innerHTML = `\n        <style>${HTTP_REQUEST_STYLES}</style>\n        <div class=\"http-request\">\n          ${showHeader ? '<div class=\"section-header\">Request</div>' : ''}\n          <div class=\"http-content\">\n            <div class=\"empty\">No request data</div>\n          </div>\n        </div>\n      `;\n      return;\n    }\n\n    const content = this.renderRequestContent(request);\n\n    this.shadowRoot.innerHTML = `\n      <style>${HTTP_REQUEST_STYLES}</style>\n      <div class=\"http-request\">\n        ${showHeader ? '<div class=\"section-header\">Request</div>' : ''}\n        <div class=\"http-content\">\n          <pre>${content}</pre>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Render request content\n   * @param {HTTPRequestData} request - Request data\n   * @returns {string} HTML content\n   * @private\n   */\n  renderRequestContent(request) {\n    const { method, url, httpVersion = 'HTTP/1.1', headers = {}, body = null } = request;\n\n    let content = '';\n\n    // Request line\n    const methodClass = `http-method-${method.toLowerCase()}`;\n    let requestLine = `<span class=\"${methodClass}\">${method}</span> `;\n    requestLine += `<span class=\"http-url\">${this.escapeHtml(url)}</span> `;\n    requestLine += `<span class=\"http-version\">${httpVersion}</span>`;\n\n    const lineHighlighted = this.isHighlighted('request-line');\n    const lineBoxed = this.isBoxed('request-line');\n\n    if (lineBoxed) {\n      const highlighted = lineHighlighted\n        ? `<mark class=\"highlight\">${requestLine}</mark>`\n        : requestLine;\n      content += `<div class=\"http-box\"><div class=\"http-box-label\">Request Line</div>${highlighted}\\n</div>`;\n    } else {\n      content += lineHighlighted\n        ? `<mark class=\"highlight\">${requestLine}</mark>\\n`\n        : `${requestLine}\\n`;\n    }\n\n    // Headers\n    const boxed = this.getBoxedSections();\n    let headersContent = '';\n\n    for (const [key, value] of Object.entries(headers)) {\n      let headerLine = `<span class=\"http-header-name\">${this.escapeHtml(key)}</span>: `;\n      if (key.toLowerCase() === 'content-type') {\n        headerLine += this.highlightContentType(value);\n      } else {\n        headerLine += `<span class=\"http-header-value\">${this.escapeHtml(value)}</span>`;\n      }\n      headerLine += '\\n';\n\n      const isHeaderHl = this.isHeaderHighlighted(key);\n      const isHeaderBoxed = boxed.specificHeaders.has(key.toLowerCase());\n\n      const processedLine = isHeaderHl\n        ? `<mark class=\"highlight\">${headerLine}</mark>`\n        : headerLine;\n\n      if (isHeaderBoxed && !boxed.allHeaders) {\n        headersContent += `<div class=\"http-box\"><div class=\"http-box-label\">${key}</div>${processedLine}</div>`;\n      } else {\n        headersContent += processedLine;\n      }\n    }\n\n    if (headersContent) {\n      if (boxed.allHeaders) {\n        content += `<div class=\"http-box\"><div class=\"http-box-label\">Headers</div>${headersContent}</div>`;\n      } else {\n        content += headersContent;\n      }\n    }\n\n    // Body\n    if (body) {\n      content += '\\n';\n      const bodyContent = this.formatBody(body, headers);\n      const bodyHighlighted = this.isHighlighted('body');\n      const bodyBoxed = this.isBoxed('body');\n\n      const processedBody = bodyHighlighted\n        ? `<mark class=\"highlight\">${bodyContent}</mark>`\n        : bodyContent;\n\n      if (bodyBoxed) {\n        content += `<div class=\"http-box\"><div class=\"http-box-label\">Body</div>${processedBody}\\n</div>`;\n      } else {\n        content += processedBody;\n      }\n    }\n\n    return content;\n  }\n\n  /**\n   * Escape HTML special characters\n   * @param {string} text - Text to escape\n   * @returns {string} Escaped text\n   */\n  escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  /**\n   * Highlight Content-Type header value\n   * @param {string} value - Content-Type value\n   * @returns {string} Highlighted HTML\n   */\n  highlightContentType(value) {\n    const escaped = this.escapeHtml(value);\n    const parts = escaped.split(';');\n    const mediaType = parts[0].trim();\n    const params = parts\n      .slice(1)\n      .map(p => p.trim())\n      .join('; ');\n\n    let result = `<span class=\"mime-type\">${mediaType}</span>`;\n    if (params) {\n      result += `<span class=\"http-header-value\">; ${params}</span>`;\n    }\n    return result;\n  }\n\n  /**\n   * Format body with syntax highlighting\n   * @param {string} body - Body content\n   * @param {Object.<string, string>} headers - HTTP headers\n   * @returns {string} Formatted body HTML\n   */\n  formatBody(body, headers) {\n    if (!body) return '';\n\n    const contentType = headers['Content-Type'] || headers['content-type'] || '';\n    const bodyStr = typeof body === 'string' ? body : JSON.stringify(body, null, 2);\n\n    // Binary check\n    const binaryTypes = [\n      'image/',\n      'video/',\n      'audio/',\n      'application/octet-stream',\n      'application/pdf',\n      'application/zip',\n      'font/',\n    ];\n    if (binaryTypes.some(type => contentType.includes(type))) {\n      const size = bodyStr.length;\n      const sizeStr =\n        size < 1024\n          ? `${size} bytes`\n          : size < 1024 * 1024\n            ? `${(size / 1024).toFixed(1)} KB`\n            : `${(size / (1024 * 1024)).toFixed(1)} MB`;\n      return `<span class=\"binary-data\">\\u{1F4E6} Binary data (${this.escapeHtml(contentType.split(';')[0])}, ${sizeStr})</span>`;\n    }\n\n    // JSON\n    if (contentType.includes('application/json') || contentType.includes('application/ld+json')) {\n      try {\n        const parsed = typeof body === 'string' ? JSON.parse(body) : body;\n        return this.formatJson(parsed);\n      } catch (e) {\n        return `<span class=\"json-error\" title=\"Invalid JSON: ${this.escapeHtml(e.message)}\">\\u26A0\\uFE0F Invalid JSON</span>\\n${this.escapeHtml(bodyStr)}`;\n      }\n    }\n\n    // HTML\n    if (contentType.includes('text/html')) {\n      return this.highlightHtml(this.escapeHtml(bodyStr));\n    }\n\n    // CSS\n    if (contentType.includes('text/css')) {\n      return this.highlightCss(this.escapeHtml(bodyStr));\n    }\n\n    // JavaScript\n    if (contentType.includes('javascript') || contentType.includes('application/x-javascript')) {\n      return this.highlightJavaScript(this.escapeHtml(bodyStr));\n    }\n\n    return this.escapeHtml(bodyStr);\n  }\n\n  /**\n   * Format JSON with syntax highlighting\n   * @param {*} obj - Object to format\n   * @param {number} indent - Indentation level\n   * @returns {string} Formatted JSON HTML\n   */\n  formatJson(obj, indent = 0) {\n    const indentStr = '  '.repeat(indent);\n    const nextIndent = '  '.repeat(indent + 1);\n\n    if (obj === null) return '<span class=\"json-null\">null</span>';\n    if (typeof obj === 'boolean') return `<span class=\"json-boolean\">${obj}</span>`;\n    if (typeof obj === 'number') return `<span class=\"json-number\">${obj}</span>`;\n    if (typeof obj === 'string')\n      return `<span class=\"json-string\">\"${this.escapeHtml(obj)}\"</span>`;\n\n    if (Array.isArray(obj)) {\n      if (obj.length === 0) return '[]';\n      const items = obj\n        .map(item => `${nextIndent}${this.formatJson(item, indent + 1)}`)\n        .join(',\\n');\n      return `[\\n${items}\\n${indentStr}]`;\n    }\n\n    if (typeof obj === 'object') {\n      const keys = Object.keys(obj);\n      if (keys.length === 0) return '{}';\n      const items = keys\n        .map(\n          key =>\n            `${nextIndent}<span class=\"json-key\">\"${this.escapeHtml(key)}\"</span>: ${this.formatJson(obj[key], indent + 1)}`\n        )\n        .join(',\\n');\n      return `{\\n${items}\\n${indentStr}}`;\n    }\n\n    return String(obj);\n  }\n\n  /**\n   * Highlight HTML syntax\n   * @param {string} html - Escaped HTML code\n   * @returns {string} Highlighted HTML\n   */\n  highlightHtml(html) {\n    return html\n      .replace(/(&lt;!--[\\s\\S]*?--&gt;)/g, '<span class=\"html-comment\">$1</span>')\n      .replace(\n        /(&lt;\\/?)([\\w-]+)((?:\\s+[\\w-]+=(?:\"[^\"]*\"|'[^']*'))*\\s*)(\\/?&gt;)/g,\n        (match, open, tag, attrs, close) => {\n          const highlightedTag = `<span class=\"html-tag\">${open}${tag}</span>`;\n          const highlightedAttrs = attrs.replace(\n            /([\\w-]+)=([\"'])([^\"']*)\\2/g,\n            '<span class=\"html-attr\">$1</span>=<span class=\"html-value\">$2$3$2</span>'\n          );\n          return highlightedTag + highlightedAttrs + `<span class=\"html-tag\">${close}</span>`;\n        }\n      );\n  }\n\n  /**\n   * Highlight CSS syntax\n   * @param {string} css - Escaped CSS code\n   * @returns {string} Highlighted CSS\n   */\n  highlightCss(css) {\n    return css\n      .replace(/(\\/\\*[\\s\\S]*?\\*\\/)/g, '<span class=\"css-comment\">$1</span>')\n      .replace(\n        /^([^{}/]+)(\\s*{)/gm,\n        (match, selector, brace) => `<span class=\"css-selector\">${selector}</span>${brace}`\n      )\n      .replace(/\\b([\\w-]+)(\\s*):/g, '<span class=\"css-property\">$1</span>$2:')\n      .replace(\n        /:\\s*([^;}\\n]+)/g,\n        (match, value) => ': <span class=\"css-value\">' + value + '</span>'\n      );\n  }\n\n  /**\n   * Highlight JavaScript syntax\n   * @param {string} js - Escaped JavaScript code\n   * @returns {string} Highlighted JavaScript\n   */\n  highlightJavaScript(js) {\n    const placeholders = [];\n    let result = js;\n\n    result = result.replace(/(\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|`(?:[^`\\\\]|\\\\.)*`)/g, match => {\n      const id = placeholders.length;\n      placeholders.push(`<span class=\"js-string\">${match}</span>`);\n      return `___PLACEHOLDER_${id}___`;\n    });\n\n    result = result.replace(/\\/\\/.*$/gm, match => {\n      const id = placeholders.length;\n      placeholders.push(`<span class=\"js-comment\">${match}</span>`);\n      return `___PLACEHOLDER_${id}___`;\n    });\n    result = result.replace(/\\/\\*[\\s\\S]*?\\*\\//g, match => {\n      const id = placeholders.length;\n      placeholders.push(`<span class=\"js-comment\">${match}</span>`);\n      return `___PLACEHOLDER_${id}___`;\n    });\n\n    result = result.replace(/\\b(\\d+\\.?\\d*)\\b/g, '<span class=\"js-number\">$1</span>');\n\n    const keywords =\n      /\\b(function|const|let|var|if|else|for|while|return|class|import|export|from|async|await|try|catch|throw|new|this|typeof|instanceof)\\b/g;\n    result = result.replace(keywords, '<span class=\"js-keyword\">$1</span>');\n\n    placeholders.forEach((replacement, id) => {\n      result = result.replace(`___PLACEHOLDER_${id}___`, replacement);\n    });\n\n    return result;\n  }\n}\n\n// Register the custom element\ncustomElements.define('http-request', HTTPRequestElement);\n\nexport { HTTPRequestElement };\n","import './http-message.js';\n\n/**\n * Inline CSS styles for http-response component\n * @const {string}\n */\nconst HTTP_RESPONSE_STYLES = `\n:host {\n  display: block;\n  font-family: 'Courier New', Courier, monospace;\n  font-size: 14px;\n  line-height: 1.5;\n\n  /* Light mode colors (default) */\n  --bg-primary: #f5f5f5;\n  --bg-secondary: white;\n  --bg-header: #059669;\n  --border-color: #ddd;\n  --text-primary: #1f2937;\n  --text-secondary: #64748b;\n  --text-empty: #9ca3af;\n\n  /* HTTP Status colors */\n  --status-success: #16a34a;\n  --status-redirect: #2563eb;\n  --status-client-error: #ea580c;\n  --status-server-error: #dc2626;\n\n  /* Syntax highlighting */\n  --version-color: #64748b;\n  --reason-phrase: #1f2937;\n  --header-name: #0066cc;\n  --header-value: #334155;\n  --mime-type-bg: #f3e8ff;\n  --mime-type-text: #7c3aed;\n}\n\n/* Dark mode */\n:host([theme=\"dark\"]) {\n  --bg-primary: #1f2937;\n  --bg-secondary: #111827;\n  --bg-header: #10b981;\n  --border-color: #374151;\n  --text-primary: #f3f4f6;\n  --text-secondary: #9ca3af;\n  --text-empty: #6b7280;\n\n  /* HTTP Status colors - brighter for dark mode */\n  --status-success: #4ade80;\n  --status-redirect: #60a5fa;\n  --status-client-error: #fb923c;\n  --status-server-error: #f87171;\n\n  /* Syntax highlighting */\n  --version-color: #9ca3af;\n  --reason-phrase: #f3f4f6;\n  --header-name: #60a5fa;\n  --header-value: #d1d5db;\n  --mime-type-bg: #581c87;\n  --mime-type-text: #e9d5ff;\n}\n\n.http-response {\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.section-header {\n  background: var(--bg-header);\n  color: white;\n  padding: 8px 12px;\n  font-weight: bold;\n  font-size: 12px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.http-content {\n  padding: 16px;\n}\n\n.http-content pre {\n  margin: 0;\n  padding: 0;\n  font-family: 'Courier New', Courier, monospace;\n  font-size: 13px;\n  line-height: 1.6;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  color: var(--text-primary);\n}\n\n.empty {\n  color: var(--text-empty);\n  font-style: italic;\n  padding: 8px 0;\n}\n\n/* HTTP Status styling */\n.http-status-success { color: var(--status-success); font-weight: bold; }\n.http-status-redirect { color: var(--status-redirect); font-weight: bold; }\n.http-status-client-error { color: var(--status-client-error); font-weight: bold; }\n.http-status-server-error { color: var(--status-server-error); font-weight: bold; }\n\n.http-version { color: var(--version-color); }\n.http-reason-phrase { color: var(--reason-phrase); font-weight: 600; }\n\n.http-header-name {\n  color: var(--header-name);\n  font-weight: 600;\n}\n\n.mime-type {\n  color: var(--mime-type-text);\n  font-weight: 700;\n  background: var(--mime-type-bg);\n  padding: 1px 4px;\n  border-radius: 2px;\n}\n\n.http-header-value {\n  color: var(--header-value);\n}\n\n/* Highlight styles */\nmark.highlight {\n  background: #fff3cd;\n  color: inherit;\n  padding: 2px 0;\n  margin: -2px 0;\n  border-radius: 2px;\n  display: inline;\n  box-decoration-break: clone;\n  -webkit-box-decoration-break: clone;\n}\n\n:host([theme='dark']) mark.highlight {\n  background: #664d03;\n  border-left: 3px solid #ffc107;\n  padding-left: 6px;\n}\n\n/* Box styles */\n.http-box {\n  position: relative;\n  border: 2px solid #059669;\n  border-radius: 6px;\n  padding: 20px 12px 12px 12px;\n  margin: 8px 0;\n  background: rgba(5, 150, 105, 0.02);\n}\n\n.http-box-label {\n  position: absolute;\n  top: -10px;\n  left: 12px;\n  background: var(--bg-secondary);\n  padding: 2px 8px;\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  color: #059669;\n  border-radius: 3px;\n  border: 2px solid #059669;\n}\n\n:host([theme='dark']) .http-box {\n  border-color: #10b981;\n  background: rgba(16, 185, 129, 0.05);\n}\n\n:host([theme='dark']) .http-box-label {\n  color: #10b981;\n  border-color: #10b981;\n}\n\n/* JSON Syntax Highlighting */\n.json-key { color: #0066cc; font-weight: 600; }\n.json-string { color: #22863a; }\n.json-number { color: #005cc5; }\n.json-boolean { color: #6f42c1; font-weight: 600; }\n.json-null { color: #6a737d; font-style: italic; }\n.json-error { color: #d73a49; font-weight: 600; background: #ffeef0; padding: 2px 6px; border-radius: 3px; }\n\n:host([theme='dark']) .json-key { color: #60a5fa; }\n:host([theme='dark']) .json-string { color: #6ee7b7; }\n:host([theme='dark']) .json-number { color: #93c5fd; }\n:host([theme='dark']) .json-boolean { color: #c4b5fd; }\n:host([theme='dark']) .json-null { color: #9ca3af; }\n:host([theme='dark']) .json-error { color: #fca5a5; background: #7f1d1d; }\n\n/* HTML Syntax Highlighting */\n.html-tag { color: #2563eb; }\n.html-attr { color: #059669; }\n.html-value { color: #7c3aed; }\n.html-comment { color: #6a737d; font-style: italic; }\n\n:host([theme='dark']) .html-tag { color: #60a5fa; }\n:host([theme='dark']) .html-attr { color: #34d399; }\n:host([theme='dark']) .html-value { color: #c4b5fd; }\n:host([theme='dark']) .html-comment { color: #9ca3af; }\n\n/* CSS Syntax Highlighting */\n.css-selector { color: #2563eb; font-weight: 600; }\n.css-property { color: #059669; }\n.css-value { color: #7c3aed; }\n.css-comment { color: #6a737d; font-style: italic; }\n\n:host([theme='dark']) .css-selector { color: #60a5fa; }\n:host([theme='dark']) .css-property { color: #34d399; }\n:host([theme='dark']) .css-value { color: #c4b5fd; }\n:host([theme='dark']) .css-comment { color: #9ca3af; }\n\n/* JavaScript Syntax Highlighting */\n.js-keyword { color: #7c3aed; font-weight: 600; }\n.js-string { color: #22863a; }\n.js-number { color: #005cc5; }\n.js-comment { color: #6a737d; font-style: italic; }\n\n:host([theme='dark']) .js-keyword { color: #c4b5fd; }\n:host([theme='dark']) .js-string { color: #6ee7b7; }\n:host([theme='dark']) .js-number { color: #93c5fd; }\n:host([theme='dark']) .js-comment { color: #9ca3af; }\n`;\n\n/**\n * @typedef {Object} HTTPResponseData\n * @property {number} status - HTTP status code\n * @property {string} statusText - Status text (OK, Not Found, etc.)\n * @property {string} [httpVersion='HTTP/1.1'] - HTTP protocol version\n * @property {Object.<string, string>} [headers={}] - Response headers\n * @property {string|null} [body=null] - Response body\n */\n\n/**\n * HTTPResponseElement - Web component for displaying HTTP responses\n * Renders status line (HTTP/version STATUS REASON) followed by headers and body.\n *\n * @class\n * @extends HTMLElement\n *\n * @example\n * <http-response></http-response>\n *\n * @example\n * // Using the data property\n * const res = document.querySelector('http-response');\n * res.data = {\n *   status: 200,\n *   statusText: 'OK',\n *   headers: { 'Content-Type': 'application/json' },\n *   body: '{\"id\": 1}'\n * };\n */\nclass HTTPResponseElement extends HTMLElement {\n  /**\n   * Creates an instance of HTTPResponseElement\n   * @constructor\n   */\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this._data = null;\n\n    // Handle property shadowing\n    if (this.hasOwnProperty('data')) {\n      const existingData = this.data;\n      delete this.data;\n      this.data = existingData;\n    }\n  }\n\n  /**\n   * Observed attributes\n   * @static\n   * @returns {string[]} Array of observed attribute names\n   */\n  static get observedAttributes() {\n    return ['response', 'theme', 'highlight', 'box', 'show-header'];\n  }\n\n  /**\n   * Called when element is added to the DOM\n   */\n  connectedCallback() {\n    this.render();\n    this.updateTheme();\n  }\n\n  /**\n   * Called when observed attributes change\n   * @param {string} name - Attribute name\n   * @param {string} oldValue - Previous value\n   * @param {string} newValue - New value\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue !== newValue) {\n      if (name === 'theme') {\n        this.updateTheme();\n      } else {\n        this.render();\n      }\n    }\n  }\n\n  /**\n   * Update theme based on attribute or system preference\n   */\n  updateTheme() {\n    const themeAttr = this.getAttribute('theme');\n\n    if (themeAttr === 'dark' || themeAttr === 'light') {\n      this.setAttribute('theme', themeAttr);\n    } else if (themeAttr === 'auto' || !themeAttr) {\n      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n      this.setAttribute('theme', prefersDark ? 'dark' : 'light');\n    }\n  }\n\n  /**\n   * Set response data\n   * @param {HTTPResponseData} value - Response data\n   */\n  set data(value) {\n    this._data = value;\n    this.render();\n  }\n\n  /**\n   * Get response data\n   * @returns {HTTPResponseData|null} Response data\n   */\n  get data() {\n    return this._data;\n  }\n\n  /**\n   * Get data from property or attribute\n   * @returns {HTTPResponseData|null} Response data\n   * @private\n   */\n  getData() {\n    if (this._data) {\n      return this._data;\n    }\n\n    const responseAttr = this.getAttribute('response');\n    if (responseAttr) {\n      try {\n        return JSON.parse(responseAttr);\n      } catch (e) {\n        console.error('Failed to parse response:', e);\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Parse highlight attribute\n   * @returns {Object} Highlight configuration\n   * @private\n   */\n  getHighlightedSections() {\n    const highlightAttr = this.getAttribute('highlight');\n    if (!highlightAttr) {\n      return { sections: new Set(), allHeaders: false, specificHeaders: new Set() };\n    }\n\n    const sections = new Set();\n    let allHeaders = false;\n    const specificHeaders = new Set();\n\n    const parts = highlightAttr\n      .split(',')\n      .map(s => s.trim())\n      .filter(s => s.length > 0);\n\n    for (const part of parts) {\n      if (part === 'headers') {\n        allHeaders = true;\n      } else if (part.startsWith('header:')) {\n        const headerName = part.substring('header:'.length).trim().toLowerCase();\n        if (headerName) {\n          specificHeaders.add(headerName);\n        }\n      } else {\n        sections.add(part);\n      }\n    }\n\n    return { sections, allHeaders, specificHeaders };\n  }\n\n  /**\n   * Check if a section should be highlighted\n   * @param {string} section - Section name\n   * @returns {boolean} True if highlighted\n   * @private\n   */\n  isHighlighted(section) {\n    return this.getHighlightedSections().sections.has(section);\n  }\n\n  /**\n   * Check if a header should be highlighted\n   * @param {string} headerName - Header name\n   * @returns {boolean} True if highlighted\n   * @private\n   */\n  isHeaderHighlighted(headerName) {\n    const highlighted = this.getHighlightedSections();\n    return highlighted.allHeaders || highlighted.specificHeaders.has(headerName.toLowerCase());\n  }\n\n  /**\n   * Parse box attribute\n   * @returns {Object} Box configuration\n   * @private\n   */\n  getBoxedSections() {\n    const boxAttr = this.getAttribute('box');\n    if (!boxAttr) {\n      return { sections: new Set(), allHeaders: false, specificHeaders: new Set() };\n    }\n\n    const sections = new Set();\n    let allHeaders = false;\n    const specificHeaders = new Set();\n\n    const parts = boxAttr\n      .split(',')\n      .map(s => s.trim())\n      .filter(s => s.length > 0);\n\n    for (const part of parts) {\n      if (part === 'headers') {\n        allHeaders = true;\n      } else if (part.startsWith('header:')) {\n        const headerName = part.substring('header:'.length).trim().toLowerCase();\n        if (headerName) {\n          specificHeaders.add(headerName);\n        }\n      } else {\n        sections.add(part);\n      }\n    }\n\n    return { sections, allHeaders, specificHeaders };\n  }\n\n  /**\n   * Check if a section should be boxed\n   * @param {string} section - Section name\n   * @returns {boolean} True if boxed\n   * @private\n   */\n  isBoxed(section) {\n    return this.getBoxedSections().sections.has(section);\n  }\n\n  /**\n   * Get CSS class for status code\n   * @param {number} status - HTTP status code\n   * @returns {string} CSS class name\n   * @private\n   */\n  getStatusColorClass(status) {\n    if (status >= 200 && status < 300) return 'http-status-success';\n    if (status >= 300 && status < 400) return 'http-status-redirect';\n    if (status >= 400 && status < 500) return 'http-status-client-error';\n    if (status >= 500) return 'http-status-server-error';\n    return 'http-status';\n  }\n\n  /**\n   * Render the component\n   * @private\n   */\n  render() {\n    const response = this.getData();\n    const showHeader = this.getAttribute('show-header') !== 'false';\n\n    if (!response) {\n      this.shadowRoot.innerHTML = `\n        <style>${HTTP_RESPONSE_STYLES}</style>\n        <div class=\"http-response\">\n          ${showHeader ? '<div class=\"section-header\">Response</div>' : ''}\n          <div class=\"http-content\">\n            <div class=\"empty\">No response data</div>\n          </div>\n        </div>\n      `;\n      return;\n    }\n\n    const content = this.renderResponseContent(response);\n\n    this.shadowRoot.innerHTML = `\n      <style>${HTTP_RESPONSE_STYLES}</style>\n      <div class=\"http-response\">\n        ${showHeader ? '<div class=\"section-header\">Response</div>' : ''}\n        <div class=\"http-content\">\n          <pre>${content}</pre>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Render response content\n   * @param {HTTPResponseData} response - Response data\n   * @returns {string} HTML content\n   * @private\n   */\n  renderResponseContent(response) {\n    const { status, statusText, httpVersion = 'HTTP/1.1', headers = {}, body = null } = response;\n\n    let content = '';\n\n    // Status line\n    const statusClass = this.getStatusColorClass(status);\n    let statusLine = `<span class=\"http-version\">${httpVersion}</span> `;\n    statusLine += `<span class=\"${statusClass}\">${status}</span> `;\n    statusLine += `<span class=\"http-reason-phrase\">${this.escapeHtml(statusText)}</span>`;\n\n    const lineHighlighted = this.isHighlighted('status-line');\n    const lineBoxed = this.isBoxed('status-line');\n\n    if (lineBoxed) {\n      const highlighted = lineHighlighted\n        ? `<mark class=\"highlight\">${statusLine}</mark>`\n        : statusLine;\n      content += `<div class=\"http-box\"><div class=\"http-box-label\">Status Line</div>${highlighted}\\n</div>`;\n    } else {\n      content += lineHighlighted\n        ? `<mark class=\"highlight\">${statusLine}</mark>\\n`\n        : `${statusLine}\\n`;\n    }\n\n    // Headers\n    const boxed = this.getBoxedSections();\n    let headersContent = '';\n\n    for (const [key, value] of Object.entries(headers)) {\n      let headerLine = `<span class=\"http-header-name\">${this.escapeHtml(key)}</span>: `;\n      if (key.toLowerCase() === 'content-type') {\n        headerLine += this.highlightContentType(value);\n      } else {\n        headerLine += `<span class=\"http-header-value\">${this.escapeHtml(value)}</span>`;\n      }\n      headerLine += '\\n';\n\n      const isHeaderHl = this.isHeaderHighlighted(key);\n      const isHeaderBoxed = boxed.specificHeaders.has(key.toLowerCase());\n\n      const processedLine = isHeaderHl\n        ? `<mark class=\"highlight\">${headerLine}</mark>`\n        : headerLine;\n\n      if (isHeaderBoxed && !boxed.allHeaders) {\n        headersContent += `<div class=\"http-box\"><div class=\"http-box-label\">${key}</div>${processedLine}</div>`;\n      } else {\n        headersContent += processedLine;\n      }\n    }\n\n    if (headersContent) {\n      if (boxed.allHeaders) {\n        content += `<div class=\"http-box\"><div class=\"http-box-label\">Headers</div>${headersContent}</div>`;\n      } else {\n        content += headersContent;\n      }\n    }\n\n    // Body\n    if (body) {\n      content += '\\n';\n      const bodyContent = this.formatBody(body, headers);\n      const bodyHighlighted = this.isHighlighted('body');\n      const bodyBoxed = this.isBoxed('body');\n\n      const processedBody = bodyHighlighted\n        ? `<mark class=\"highlight\">${bodyContent}</mark>`\n        : bodyContent;\n\n      if (bodyBoxed) {\n        content += `<div class=\"http-box\"><div class=\"http-box-label\">Body</div>${processedBody}\\n</div>`;\n      } else {\n        content += processedBody;\n      }\n    }\n\n    return content;\n  }\n\n  /**\n   * Escape HTML special characters\n   * @param {string} text - Text to escape\n   * @returns {string} Escaped text\n   */\n  escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  /**\n   * Highlight Content-Type header value\n   * @param {string} value - Content-Type value\n   * @returns {string} Highlighted HTML\n   */\n  highlightContentType(value) {\n    const escaped = this.escapeHtml(value);\n    const parts = escaped.split(';');\n    const mediaType = parts[0].trim();\n    const params = parts\n      .slice(1)\n      .map(p => p.trim())\n      .join('; ');\n\n    let result = `<span class=\"mime-type\">${mediaType}</span>`;\n    if (params) {\n      result += `<span class=\"http-header-value\">; ${params}</span>`;\n    }\n    return result;\n  }\n\n  /**\n   * Format body with syntax highlighting\n   * @param {string} body - Body content\n   * @param {Object.<string, string>} headers - HTTP headers\n   * @returns {string} Formatted body HTML\n   */\n  formatBody(body, headers) {\n    if (!body) return '';\n\n    const contentType = headers['Content-Type'] || headers['content-type'] || '';\n    const bodyStr = typeof body === 'string' ? body : JSON.stringify(body, null, 2);\n\n    // Binary check\n    const binaryTypes = [\n      'image/',\n      'video/',\n      'audio/',\n      'application/octet-stream',\n      'application/pdf',\n      'application/zip',\n      'font/',\n    ];\n    if (binaryTypes.some(type => contentType.includes(type))) {\n      const size = bodyStr.length;\n      const sizeStr =\n        size < 1024\n          ? `${size} bytes`\n          : size < 1024 * 1024\n            ? `${(size / 1024).toFixed(1)} KB`\n            : `${(size / (1024 * 1024)).toFixed(1)} MB`;\n      return `<span class=\"binary-data\">\\u{1F4E6} Binary data (${this.escapeHtml(contentType.split(';')[0])}, ${sizeStr})</span>`;\n    }\n\n    // JSON\n    if (contentType.includes('application/json') || contentType.includes('application/ld+json')) {\n      try {\n        const parsed = typeof body === 'string' ? JSON.parse(body) : body;\n        return this.formatJson(parsed);\n      } catch (e) {\n        return `<span class=\"json-error\" title=\"Invalid JSON: ${this.escapeHtml(e.message)}\">\\u26A0\\uFE0F Invalid JSON</span>\\n${this.escapeHtml(bodyStr)}`;\n      }\n    }\n\n    // HTML\n    if (contentType.includes('text/html')) {\n      return this.highlightHtml(this.escapeHtml(bodyStr));\n    }\n\n    // CSS\n    if (contentType.includes('text/css')) {\n      return this.highlightCss(this.escapeHtml(bodyStr));\n    }\n\n    // JavaScript\n    if (contentType.includes('javascript') || contentType.includes('application/x-javascript')) {\n      return this.highlightJavaScript(this.escapeHtml(bodyStr));\n    }\n\n    return this.escapeHtml(bodyStr);\n  }\n\n  /**\n   * Format JSON with syntax highlighting\n   * @param {*} obj - Object to format\n   * @param {number} indent - Indentation level\n   * @returns {string} Formatted JSON HTML\n   */\n  formatJson(obj, indent = 0) {\n    const indentStr = '  '.repeat(indent);\n    const nextIndent = '  '.repeat(indent + 1);\n\n    if (obj === null) return '<span class=\"json-null\">null</span>';\n    if (typeof obj === 'boolean') return `<span class=\"json-boolean\">${obj}</span>`;\n    if (typeof obj === 'number') return `<span class=\"json-number\">${obj}</span>`;\n    if (typeof obj === 'string')\n      return `<span class=\"json-string\">\"${this.escapeHtml(obj)}\"</span>`;\n\n    if (Array.isArray(obj)) {\n      if (obj.length === 0) return '[]';\n      const items = obj\n        .map(item => `${nextIndent}${this.formatJson(item, indent + 1)}`)\n        .join(',\\n');\n      return `[\\n${items}\\n${indentStr}]`;\n    }\n\n    if (typeof obj === 'object') {\n      const keys = Object.keys(obj);\n      if (keys.length === 0) return '{}';\n      const items = keys\n        .map(\n          key =>\n            `${nextIndent}<span class=\"json-key\">\"${this.escapeHtml(key)}\"</span>: ${this.formatJson(obj[key], indent + 1)}`\n        )\n        .join(',\\n');\n      return `{\\n${items}\\n${indentStr}}`;\n    }\n\n    return String(obj);\n  }\n\n  /**\n   * Highlight HTML syntax\n   * @param {string} html - Escaped HTML code\n   * @returns {string} Highlighted HTML\n   */\n  highlightHtml(html) {\n    return html\n      .replace(/(&lt;!--[\\s\\S]*?--&gt;)/g, '<span class=\"html-comment\">$1</span>')\n      .replace(\n        /(&lt;\\/?)([\\w-]+)((?:\\s+[\\w-]+=(?:\"[^\"]*\"|'[^']*'))*\\s*)(\\/?&gt;)/g,\n        (match, open, tag, attrs, close) => {\n          const highlightedTag = `<span class=\"html-tag\">${open}${tag}</span>`;\n          const highlightedAttrs = attrs.replace(\n            /([\\w-]+)=([\"'])([^\"']*)\\2/g,\n            '<span class=\"html-attr\">$1</span>=<span class=\"html-value\">$2$3$2</span>'\n          );\n          return highlightedTag + highlightedAttrs + `<span class=\"html-tag\">${close}</span>`;\n        }\n      );\n  }\n\n  /**\n   * Highlight CSS syntax\n   * @param {string} css - Escaped CSS code\n   * @returns {string} Highlighted CSS\n   */\n  highlightCss(css) {\n    return css\n      .replace(/(\\/\\*[\\s\\S]*?\\*\\/)/g, '<span class=\"css-comment\">$1</span>')\n      .replace(\n        /^([^{}/]+)(\\s*{)/gm,\n        (match, selector, brace) => `<span class=\"css-selector\">${selector}</span>${brace}`\n      )\n      .replace(/\\b([\\w-]+)(\\s*):/g, '<span class=\"css-property\">$1</span>$2:')\n      .replace(\n        /:\\s*([^;}\\n]+)/g,\n        (match, value) => ': <span class=\"css-value\">' + value + '</span>'\n      );\n  }\n\n  /**\n   * Highlight JavaScript syntax\n   * @param {string} js - Escaped JavaScript code\n   * @returns {string} Highlighted JavaScript\n   */\n  highlightJavaScript(js) {\n    const placeholders = [];\n    let result = js;\n\n    result = result.replace(/(\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|`(?:[^`\\\\]|\\\\.)*`)/g, match => {\n      const id = placeholders.length;\n      placeholders.push(`<span class=\"js-string\">${match}</span>`);\n      return `___PLACEHOLDER_${id}___`;\n    });\n\n    result = result.replace(/\\/\\/.*$/gm, match => {\n      const id = placeholders.length;\n      placeholders.push(`<span class=\"js-comment\">${match}</span>`);\n      return `___PLACEHOLDER_${id}___`;\n    });\n    result = result.replace(/\\/\\*[\\s\\S]*?\\*\\//g, match => {\n      const id = placeholders.length;\n      placeholders.push(`<span class=\"js-comment\">${match}</span>`);\n      return `___PLACEHOLDER_${id}___`;\n    });\n\n    result = result.replace(/\\b(\\d+\\.?\\d*)\\b/g, '<span class=\"js-number\">$1</span>');\n\n    const keywords =\n      /\\b(function|const|let|var|if|else|for|while|return|class|import|export|from|async|await|try|catch|throw|new|this|typeof|instanceof)\\b/g;\n    result = result.replace(keywords, '<span class=\"js-keyword\">$1</span>');\n\n    placeholders.forEach((replacement, id) => {\n      result = result.replace(`___PLACEHOLDER_${id}___`, replacement);\n    });\n\n    return result;\n  }\n}\n\n// Register the custom element\ncustomElements.define('http-response', HTTPResponseElement);\n\nexport { HTTPResponseElement };\n","import './http-request.js';\nimport './http-response.js';\n\n/**\n * Inline CSS styles for http-transaction component\n * @const {string}\n */\nconst HTTP_TRANSACTION_STYLES = `\n:host {\n  display: block;\n  font-family: 'Courier New', Courier, monospace;\n  font-size: 14px;\n  line-height: 1.5;\n\n  /* Light mode colors (default) */\n  --bg-primary: #f5f5f5;\n  --bg-secondary: white;\n  --border-color: #ddd;\n  --text-primary: #1f2937;\n  --text-secondary: #64748b;\n  --text-empty: #9ca3af;\n}\n\n/* Dark mode */\n:host([theme=\"dark\"]) {\n  --bg-primary: #1f2937;\n  --bg-secondary: #111827;\n  --border-color: #374151;\n  --text-primary: #f3f4f6;\n  --text-secondary: #9ca3af;\n  --text-empty: #6b7280;\n}\n\n.http-transaction {\n  display: flex;\n  gap: 20px;\n  padding: 16px;\n  background: var(--bg-primary);\n  border-radius: 4px;\n}\n\n.http-section {\n  flex: 1;\n}\n\n.empty {\n  color: var(--text-empty);\n  font-style: italic;\n  padding: 16px;\n}\n\n/* Responsive layout for smaller screens */\n@media (max-width: 768px) {\n  .http-transaction {\n    flex-direction: column;\n  }\n}\n`;\n\n/**\n * @typedef {Object} HTTPRequest\n * @property {string} method - HTTP method (GET, POST, etc.)\n * @property {string} url - Request URL\n * @property {string} [httpVersion='HTTP/1.1'] - HTTP protocol version\n * @property {Object.<string, string>} [headers={}] - Request headers\n * @property {string|null} [body=null] - Request body\n */\n\n/**\n * @typedef {Object} HTTPResponse\n * @property {number} status - HTTP status code\n * @property {string} statusText - Status text (OK, Not Found, etc.)\n * @property {string} [httpVersion='HTTP/1.1'] - HTTP protocol version\n * @property {Object.<string, string>} [headers={}] - Response headers\n * @property {string|null} [body=null] - Response body\n */\n\n/**\n * @typedef {Object} HTTPExchange\n * @property {HTTPRequest} request - The HTTP request\n * @property {HTTPResponse} response - The HTTP response\n */\n\n/**\n * HTTPTransactionElement - Web component for displaying HTTP request/response pairs\n * Displays data in raw HTTP wire format for educational purposes.\n * Composes http-request and http-response sub-components.\n *\n * @class\n * @extends HTMLElement\n *\n * @example\n * // Using the data property\n * const transaction = document.querySelector('http-transaction');\n * transaction.data = {\n *   request: {\n *     method: 'GET',\n *     url: '/api/users',\n *     headers: { 'Accept': 'application/json' }\n *   },\n *   response: {\n *     status: 200,\n *     statusText: 'OK',\n *     headers: { 'Content-Type': 'application/json' },\n *     body: JSON.stringify({ id: 1, name: 'John' })\n *   }\n * };\n *\n * @example\n * // Using attributes\n * <http-transaction\n *   request='{\"method\":\"GET\",\"url\":\"/api/users\"}'\n *   response='{\"status\":200,\"body\":\"...\"}'\n *   theme=\"dark\">\n * </http-transaction>\n */\nclass HTTPTransactionElement extends HTMLElement {\n  /**\n   * Creates an instance of HTTPTransactionElement\n   * @constructor\n   */\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this._data = null;\n\n    // Handle case where 'data' property was set before element upgrade\n    if (this.hasOwnProperty('data')) {\n      const existingData = this.data;\n      delete this.data;\n      this.data = existingData;\n    }\n  }\n\n  /**\n   * Observed attributes for automatic re-rendering\n   * @static\n   * @returns {string[]} Array of observed attribute names\n   */\n  static get observedAttributes() {\n    return ['request', 'response', 'theme', 'highlight', 'box'];\n  }\n\n  /**\n   * Called when element is added to the DOM\n   * @memberof HTTPTransactionElement\n   */\n  connectedCallback() {\n    this.render();\n    this.updateTheme();\n  }\n\n  /**\n   * Called when observed attributes change\n   * @param {string} name - Attribute name\n   * @param {string} oldValue - Previous value\n   * @param {string} newValue - New value\n   * @memberof HTTPTransactionElement\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue !== newValue) {\n      if (name === 'theme') {\n        this.updateTheme();\n        this.updateChildThemes();\n      } else {\n        this.render();\n      }\n    }\n  }\n\n  /**\n   * Update theme based on attribute or system preference\n   * Sets theme to 'dark', 'light', or auto-detects from system\n   * @memberof HTTPTransactionElement\n   */\n  updateTheme() {\n    const themeAttr = this.getAttribute('theme');\n\n    if (themeAttr === 'dark' || themeAttr === 'light') {\n      this.setAttribute('theme', themeAttr);\n    } else if (themeAttr === 'auto' || !themeAttr) {\n      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n      this.setAttribute('theme', prefersDark ? 'dark' : 'light');\n    }\n  }\n\n  /**\n   * Update theme on child components\n   * @memberof HTTPTransactionElement\n   * @private\n   */\n  updateChildThemes() {\n    const theme = this.getAttribute('theme');\n    const requests = this.shadowRoot.querySelectorAll('http-request');\n    const responses = this.shadowRoot.querySelectorAll('http-response');\n\n    requests.forEach(el => el.setAttribute('theme', theme));\n    responses.forEach(el => el.setAttribute('theme', theme));\n  }\n\n  /**\n   * Set request/response data via property\n   * @param {HTTPExchange} value - HTTP exchange data containing request and response\n   * @memberof HTTPTransactionElement\n   */\n  set data(value) {\n    this._data = value;\n    this.render();\n  }\n\n  /**\n   * Get current HTTP exchange data\n   * @returns {HTTPExchange|null} Current exchange data\n   * @memberof HTTPTransactionElement\n   */\n  get data() {\n    return this._data;\n  }\n\n  /**\n   * Parse JSON attribute or use property data\n   * Attempts to parse 'request' and 'response' attributes as JSON\n   * @returns {HTTPExchange} Exchange object with request and response\n   * @memberof HTTPTransactionElement\n   * @private\n   */\n  getData() {\n    if (this._data) {\n      return this._data;\n    }\n\n    const requestAttr = this.getAttribute('request');\n    const responseAttr = this.getAttribute('response');\n\n    try {\n      return {\n        request: requestAttr ? JSON.parse(requestAttr) : null,\n        response: responseAttr ? JSON.parse(responseAttr) : null,\n      };\n    } catch (e) {\n      console.error('Failed to parse HTTP data:', e);\n      return { request: null, response: null };\n    }\n  }\n\n  /**\n   * Parse highlight attribute and split into request/response highlights\n   * @returns {Object} Highlight configuration for request and response\n   * @memberof HTTPTransactionElement\n   * @private\n   */\n  getHighlightConfig() {\n    const highlightAttr = this.getAttribute('highlight');\n    if (!highlightAttr) {\n      return { request: '', response: '' };\n    }\n\n    const requestHighlights = [];\n    const responseHighlights = [];\n\n    const parts = highlightAttr\n      .split(',')\n      .map(s => s.trim())\n      .filter(s => s.length > 0);\n\n    for (const part of parts) {\n      if (part.startsWith('request-')) {\n        // Convert request-line -> request-line, request-headers -> headers, request-body -> body\n        const section = part.replace('request-', '');\n        if (section === 'line') {\n          requestHighlights.push('request-line');\n        } else {\n          requestHighlights.push(section);\n        }\n      } else if (part.startsWith('response-')) {\n        // Convert response-line -> status-line, response-headers -> headers, response-body -> body\n        const section = part.replace('response-', '');\n        if (section === 'line') {\n          responseHighlights.push('status-line');\n        } else {\n          responseHighlights.push(section);\n        }\n      } else if (part.startsWith('request-header:')) {\n        requestHighlights.push(part.replace('request-header:', 'header:'));\n      } else if (part.startsWith('response-header:')) {\n        responseHighlights.push(part.replace('response-header:', 'header:'));\n      }\n    }\n\n    return {\n      request: requestHighlights.join(','),\n      response: responseHighlights.join(','),\n    };\n  }\n\n  /**\n   * Parse box attribute and split into request/response boxes\n   * @returns {Object} Box configuration for request and response\n   * @memberof HTTPTransactionElement\n   * @private\n   */\n  getBoxConfig() {\n    const boxAttr = this.getAttribute('box');\n    if (!boxAttr) {\n      return { request: '', response: '' };\n    }\n\n    const requestBoxes = [];\n    const responseBoxes = [];\n\n    const parts = boxAttr\n      .split(',')\n      .map(s => s.trim())\n      .filter(s => s.length > 0);\n\n    for (const part of parts) {\n      if (part.startsWith('request-')) {\n        const section = part.replace('request-', '');\n        if (section === 'line') {\n          requestBoxes.push('request-line');\n        } else {\n          requestBoxes.push(section);\n        }\n      } else if (part.startsWith('response-')) {\n        const section = part.replace('response-', '');\n        if (section === 'line') {\n          responseBoxes.push('status-line');\n        } else {\n          responseBoxes.push(section);\n        }\n      } else if (part.startsWith('request-header:')) {\n        requestBoxes.push(part.replace('request-header:', 'header:'));\n      } else if (part.startsWith('response-header:')) {\n        responseBoxes.push(part.replace('response-header:', 'header:'));\n      }\n    }\n\n    return {\n      request: requestBoxes.join(','),\n      response: responseBoxes.join(','),\n    };\n  }\n\n  /**\n   * Render the component's shadow DOM\n   * Only renders sections for which data is provided\n   * @memberof HTTPTransactionElement\n   * @private\n   */\n  render() {\n    const data = this.getData();\n    const hasRequest = data.request !== null && data.request !== undefined;\n    const hasResponse = data.response !== null && data.response !== undefined;\n    const theme = this.getAttribute('theme') || 'light';\n\n    const highlightConfig = this.getHighlightConfig();\n    const boxConfig = this.getBoxConfig();\n\n    // Build sections conditionally\n    let sections = '';\n\n    if (hasRequest) {\n      sections += `\n        <div class=\"http-section\">\n          <http-request\n            theme=\"${theme}\"\n            ${highlightConfig.request ? `highlight=\"${highlightConfig.request}\"` : ''}\n            ${boxConfig.request ? `box=\"${boxConfig.request}\"` : ''}\n          ></http-request>\n        </div>\n      `;\n    }\n\n    if (hasResponse) {\n      sections += `\n        <div class=\"http-section\">\n          <http-response\n            theme=\"${theme}\"\n            ${highlightConfig.response ? `highlight=\"${highlightConfig.response}\"` : ''}\n            ${boxConfig.response ? `box=\"${boxConfig.response}\"` : ''}\n          ></http-response>\n        </div>\n      `;\n    }\n\n    // If neither request nor response, show a placeholder\n    if (!hasRequest && !hasResponse) {\n      sections = '<div class=\"empty\">No HTTP data provided</div>';\n    }\n\n    this.shadowRoot.innerHTML = `\n      <style>${HTTP_TRANSACTION_STYLES}</style>\n      <div class=\"http-transaction\">\n        ${sections}\n      </div>\n    `;\n\n    // Set data on child components\n    if (hasRequest) {\n      const requestEl = this.shadowRoot.querySelector('http-request');\n      if (requestEl) {\n        requestEl.data = data.request;\n      }\n    }\n\n    if (hasResponse) {\n      const responseEl = this.shadowRoot.querySelector('http-response');\n      if (responseEl) {\n        responseEl.data = data.response;\n      }\n    }\n  }\n}\n\n// Register the custom element\ncustomElements.define('http-transaction', HTTPTransactionElement);\n\n// Also register as http-console for backwards compatibility\nif (!customElements.get('http-console')) {\n  customElements.define('http-console', class HTTPConsoleElement extends HTTPTransactionElement {});\n}\n\nexport { HTTPTransactionElement };\n","/**\n * @typedef {Object} InterceptorOptions\n * @property {string|null} [filter=null] - URL filter pattern (* wildcard supported)\n * @property {number} [maxBodySize=1048576] - Maximum body size to capture (bytes)\n */\n\n/**\n * @callback ExchangeCallback\n * @param {Object} exchange - Captured HTTP exchange\n * @param {Object} exchange.request - Request data\n * @param {Object} exchange.response - Response data\n * @param {Object} exchange.timing - Timing information\n */\n\n/**\n * HTTP Interceptor - Captures fetch and XMLHttpRequest calls\n * Provides timing data and request/response details for visualization.\n * Patches global fetch and XMLHttpRequest to intercept all HTTP traffic.\n *\n * @class\n * @example\n * const interceptor = new HTTPInterceptor();\n * interceptor.start((exchange) => {\n *   console.log('Captured:', exchange.request.method, exchange.request.url);\n * }, {\n *   filter: '/api/*',\n *   maxBodySize: 1024 * 1024\n * });\n *\n * // Later, stop intercepting\n * interceptor.stop();\n */\nexport class HTTPInterceptor {\n  /**\n   * Creates a new HTTP interceptor instance\n   * @constructor\n   */\n  constructor() {\n    /** @type {Set<ExchangeCallback>} */\n    this.listeners = new Set();\n    /** @type {boolean} */\n    this.isActive = false;\n    /** @type {boolean} */\n    this.isPaused = false;\n    /** @type {string|null} */\n    this.filter = null;\n    /** @type {Function|null} */\n    this.originalFetch = null;\n    /** @type {Function|null} */\n    this.originalXHR = null;\n    /** @type {number} */\n    this.maxBodySize = 1024 * 1024; // 1MB\n  }\n\n  /**\n   * Start intercepting HTTP requests\n   * Patches window.fetch and window.XMLHttpRequest\n   * @param {ExchangeCallback} callback - Called with each captured exchange\n   * @param {InterceptorOptions} [options={}] - Configuration options\n   * @memberof HTTPInterceptor\n   */\n  start(callback, options = {}) {\n    if (this.isActive) {\n      console.warn('HTTPInterceptor is already active');\n      return;\n    }\n\n    this.filter = options.filter || null;\n    this.maxBodySize = options.maxBodySize || this.maxBodySize;\n\n    if (callback) {\n      this.listeners.add(callback);\n    }\n\n    this.patchFetch();\n    this.patchXHR();\n\n    this.isActive = true;\n    this.isPaused = false;\n  }\n\n  /**\n   * Stop intercepting and restore original functions\n   * Removes patches from window.fetch and window.XMLHttpRequest\n   * @memberof HTTPInterceptor\n   */\n  stop() {\n    if (!this.isActive) return;\n\n    if (this.originalFetch) {\n      window.fetch = this.originalFetch;\n      this.originalFetch = null;\n    }\n\n    if (this.originalXHR) {\n      window.XMLHttpRequest = this.originalXHR;\n      this.originalXHR = null;\n    }\n\n    this.isActive = false;\n    this.listeners.clear();\n  }\n\n  /**\n   * Pause capturing without stopping interception\n   * Requests will still be intercepted but not forwarded to listeners\n   * @memberof HTTPInterceptor\n   */\n  pause() {\n    this.isPaused = true;\n  }\n\n  /**\n   * Resume capturing after pause\n   * @memberof HTTPInterceptor\n   */\n  resume() {\n    this.isPaused = false;\n  }\n\n  /**\n   * Add a listener for captured requests\n   * @param {ExchangeCallback} callback - Callback to invoke for each exchange\n   * @memberof HTTPInterceptor\n   */\n  addListener(callback) {\n    this.listeners.add(callback);\n  }\n\n  /**\n   * Remove a listener\n   * @param {ExchangeCallback} callback - Callback to remove\n   * @memberof HTTPInterceptor\n   */\n  removeListener(callback) {\n    this.listeners.delete(callback);\n  }\n\n  /**\n   * Notify all listeners with captured data\n   * Applies filter and pause checks before notifying\n   * @param {Object} exchange - HTTP exchange to send to listeners\n   * @memberof HTTPInterceptor\n   * @private\n   */\n  notifyListeners(exchange) {\n    if (this.isPaused) return;\n\n    // Check filter\n    if (this.filter && !this.matchesFilter(exchange.request.url)) {\n      return;\n    }\n\n    this.listeners.forEach(listener => {\n      try {\n        listener(exchange);\n      } catch (error) {\n        console.error('Error in HTTPInterceptor listener:', error);\n      }\n    });\n  }\n\n  /**\n   * Check if URL matches filter pattern\n   */\n  matchesFilter(url) {\n    if (!this.filter) return true;\n\n    // Convert wildcard pattern to regex\n    const pattern = this.filter\n      .replace(/[.+?^${}()|[\\]\\\\]/g, '\\\\$&') // Escape special chars\n      .replace(/\\*/g, '.*'); // Convert * to .*\n\n    const regex = new RegExp(pattern);\n    return regex.test(url);\n  }\n\n  /**\n   * Patch window.fetch\n   */\n  patchFetch() {\n    if (this.originalFetch) return;\n\n    this.originalFetch = window.fetch;\n    const interceptor = this;\n\n    window.fetch = function (...args) {\n      const startTime = performance.now();\n      const [resource, init = {}] = args;\n\n      // Extract URL\n      const url = typeof resource === 'string' ? resource : resource.url;\n\n      // Extract request details\n      const request = {\n        method: init.method || 'GET',\n        url: url,\n        httpVersion: 'HTTP/1.1',\n        headers: interceptor.extractHeaders(init.headers),\n        body: init.body || null,\n      };\n\n      return interceptor.originalFetch\n        .apply(this, args)\n        .then(async response => {\n          const endTime = performance.now();\n\n          try {\n            // Clone response to read without consuming\n            const clone = response.clone();\n\n            // Extract response data\n            const responseData = await interceptor.extractResponse(clone);\n\n            // Create exchange object\n            const exchange = {\n              request,\n              response: responseData,\n              timing: {\n                startTime,\n                endTime,\n                duration: Math.round(endTime - startTime),\n              },\n            };\n\n            interceptor.notifyListeners(exchange);\n          } catch (error) {\n            console.error('Error extracting response data:', error);\n          }\n\n          return response; // Return original response\n        })\n        .catch(error => {\n          const endTime = performance.now();\n\n          // Create error exchange\n          const exchange = {\n            request,\n            response: {\n              status: 0,\n              statusText: 'Network Error',\n              httpVersion: 'HTTP/1.1',\n              headers: {},\n              body: JSON.stringify({ error: error.message }),\n            },\n            timing: {\n              startTime,\n              endTime,\n              duration: Math.round(endTime - startTime),\n            },\n          };\n\n          interceptor.notifyListeners(exchange);\n\n          throw error; // Re-throw to not break caller's code\n        });\n    };\n  }\n\n  /**\n   * Patch XMLHttpRequest\n   */\n  patchXHR() {\n    if (this.originalXHR) return;\n\n    this.originalXHR = window.XMLHttpRequest;\n    const interceptor = this;\n\n    window.XMLHttpRequest = function () {\n      const xhr = new interceptor.originalXHR();\n      const requestData = {\n        method: 'GET',\n        url: '',\n        httpVersion: 'HTTP/1.1',\n        headers: {},\n        body: null,\n      };\n\n      let startTime = 0;\n\n      // Override open\n      const originalOpen = xhr.open;\n      xhr.open = function (method, url, ...args) {\n        requestData.method = method;\n        requestData.url = url;\n        return originalOpen.apply(this, [method, url, ...args]);\n      };\n\n      // Override setRequestHeader\n      const originalSetRequestHeader = xhr.setRequestHeader;\n      xhr.setRequestHeader = function (name, value) {\n        requestData.headers[name] = value;\n        return originalSetRequestHeader.apply(this, arguments);\n      };\n\n      // Override send\n      const originalSend = xhr.send;\n      xhr.send = function (body) {\n        requestData.body = body || null;\n        startTime = performance.now();\n\n        // Listen for completion\n        xhr.addEventListener('loadend', function () {\n          const endTime = performance.now();\n\n          // Extract response headers\n          const responseHeaders = {};\n          const headerString = xhr.getAllResponseHeaders();\n          if (headerString) {\n            headerString.split('\\r\\n').forEach(line => {\n              const [name, value] = line.split(': ');\n              if (name && value) {\n                responseHeaders[name] = value;\n              }\n            });\n          }\n\n          // Create exchange\n          const exchange = {\n            request: requestData,\n            response: {\n              status: xhr.status,\n              statusText: xhr.statusText,\n              httpVersion: 'HTTP/1.1',\n              headers: responseHeaders,\n              body: interceptor.truncateBody(\n                xhr.responseText,\n                xhr.getResponseHeader('Content-Type')\n              ),\n            },\n            timing: {\n              startTime,\n              endTime,\n              duration: Math.round(endTime - startTime),\n            },\n          };\n\n          interceptor.notifyListeners(exchange);\n        });\n\n        return originalSend.apply(this, arguments);\n      };\n\n      return xhr;\n    };\n  }\n\n  /**\n   * Extract headers from various formats\n   */\n  extractHeaders(headers) {\n    if (!headers) return {};\n\n    if (headers instanceof Headers) {\n      const result = {};\n      headers.forEach((value, key) => {\n        result[key] = value;\n      });\n      return result;\n    }\n\n    return headers;\n  }\n\n  /**\n   * Extract response data\n   */\n  async extractResponse(response) {\n    const headers = {};\n    response.headers.forEach((value, key) => {\n      headers[key] = value;\n    });\n\n    const contentType = response.headers.get('Content-Type') || '';\n    let body = null;\n\n    try {\n      // Try to read body\n      const text = await response.text();\n      body = this.truncateBody(text, contentType);\n    } catch {\n      body = '[Body not accessible - CORS or stream error]';\n    }\n\n    return {\n      status: response.status,\n      statusText: response.statusText,\n      httpVersion: 'HTTP/1.1',\n      headers,\n      body,\n    };\n  }\n\n  /**\n   * Truncate large bodies\n   */\n  truncateBody(text, _contentType) {\n    if (!text) return null;\n\n    if (text.length > this.maxBodySize) {\n      const sizeMB = (text.length / (1024 * 1024)).toFixed(2);\n      return `[Body too large: ${sizeMB}MB - showing first 1MB]\\n\\n${text.substring(0, this.maxBodySize)}`;\n    }\n\n    return text;\n  }\n}\n\n// Create singleton instance\nexport const httpInterceptor = new HTTPInterceptor();\n","import { HTTPInterceptor } from './http-interceptor.js';\nimport './http-transaction.js';\n\n/**\n * Inline CSS styles for http-waterfall component\n * @const {string}\n */\nconst HTTP_WATERFALL_STYLES = `/** HTTP Waterfall Component Styles */\n:host { display: block; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-size: 14px; --bg-primary: white; --bg-secondary: #f9fafb; --bg-tertiary: #fafafa; --bg-expanded: #f3f4f6; --border-color: #e5e7eb; --text-primary: #374151; --text-secondary: #6b7280; --text-tertiary: #9ca3af; --button-bg: white; --button-border: #d1d5db; --button-hover-bg: #f3f4f6; --button-hover-border: #9ca3af; --button-active-bg: #e5e7eb; --button-primary-bg: #2563eb; --button-primary-border: #2563eb; --button-primary-hover: #1d4ed8; --status-success-bg: #dcfce7; --status-success-text: #166534; --status-redirect-bg: #e0e7ff; --status-redirect-text: #3730a3; --status-client-error-bg: #fef3c7; --status-client-error-text: #92400e; --status-server-error-bg: #fee2e2; --status-server-error-text: #991b1b; --timing-success-bg: #86efac; --timing-success-border: #22c55e; --timing-redirect-bg: #a5b4fc; --timing-redirect-border: #6366f1; --timing-client-error-bg: #fde047; --timing-client-error-border: #eab308; --timing-server-error-bg: #fca5a5; --timing-server-error-border: #ef4444; --capture-active-bg: #dcfce7; --capture-active-text: #166534; --capture-active-dot: #22c55e; --capture-paused-bg: #fef3c7; --capture-paused-text: #92400e; }\n:host([theme=\"dark\"]) { --bg-primary: #111827; --bg-secondary: #1f2937; --bg-tertiary: #374151; --bg-expanded: #4b5563; --border-color: #374151; --text-primary: #f3f4f6; --text-secondary: #9ca3af; --text-tertiary: #6b7280; --button-bg: #374151; --button-border: #4b5563; --button-hover-bg: #4b5563; --button-hover-border: #6b7280; --button-active-bg: #6b7280; --button-primary-bg: #3b82f6; --button-primary-border: #3b82f6; --button-primary-hover: #2563eb; --status-success-bg: #065f46; --status-success-text: #6ee7b7; --status-redirect-bg: #312e81; --status-redirect-text: #a5b4fc; --status-client-error-bg: #78350f; --status-client-error-text: #fde047; --status-server-error-bg: #7f1d1d; --status-server-error-text: #fca5a5; --timing-success-bg: #047857; --timing-success-border: #10b981; --timing-redirect-bg: #4338ca; --timing-redirect-border: #6366f1; --timing-client-error-bg: #b45309; --timing-client-error-border: #f59e0b; --timing-server-error-bg: #b91c1c; --timing-server-error-border: #ef4444; --capture-active-bg: #065f46; --capture-active-text: #6ee7b7; --capture-active-dot: #10b981; --capture-paused-bg: #78350f; --capture-paused-text: #fde047; }\n.http-waterfall { background: var(--bg-primary); border: 1px solid var(--border-color); border-radius: 4px; overflow: hidden; }\n.toolbar { display: flex; justify-content: space-between; align-items: center; gap: 16px; padding: 12px 16px; background: var(--bg-secondary); border-bottom: 1px solid var(--border-color); }\n.view-toggle { display: flex; gap: 4px; }\n.view-btn { padding: 6px 12px; border: 1px solid var(--button-border); background: var(--button-bg); color: var(--text-primary); font-size: 13px; font-weight: 500; cursor: pointer; border-radius: 4px; transition: all 0.2s; }\n.view-btn:hover { background: var(--button-hover-bg); }\n.view-btn.active { background: var(--button-primary-bg); color: white; border-color: var(--button-primary-border); }\n.capture-controls { display: flex; align-items: center; gap: 8px; margin-left: auto; }\n.control-btn { padding: 6px 12px; border: 1px solid var(--button-border); background: var(--button-bg); color: var(--text-primary); font-size: 16px; cursor: pointer; border-radius: 4px; transition: all 0.2s; min-width: 36px; }\n.control-btn:hover { background: var(--button-hover-bg); border-color: var(--button-hover-border); }\n.control-btn:active { background: var(--button-active-bg); }\n.capture-indicator { font-size: 12px; font-weight: 500; padding: 4px 12px; border-radius: 12px; display: flex; align-items: center; gap: 6px; }\n.capture-indicator.active { background: var(--capture-active-bg); color: var(--capture-active-text); }\n.capture-indicator.active::before { content: ''; display: inline-block; width: 8px; height: 8px; background: var(--capture-active-dot); border-radius: 50%; animation: pulse 2s ease-in-out infinite; }\n.capture-indicator.paused { background: var(--capture-paused-bg); color: var(--capture-paused-text); }\n@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }\n.info { font-size: 13px; color: var(--text-secondary); }\n.empty { padding: 40px 20px; text-align: center; color: var(--text-tertiary); font-style: italic; }\n.list-view { display: flex; flex-direction: column; }\n.exchange-row { border-bottom: 1px solid var(--border-color); }\n.exchange-row:last-child { border-bottom: none; }\n.exchange-summary { display: grid; grid-template-columns: 80px 1fr 140px 80px 80px 40px; gap: 12px; align-items: center; padding: 12px 16px; cursor: pointer; transition: background 0.2s; }\n.exchange-summary:hover { background: var(--bg-secondary); }\n.exchange-row.expanded .exchange-summary { background: var(--bg-expanded); border-bottom: 1px solid var(--border-color); }\n.method { font-weight: 600; font-family: 'Courier New', monospace; padding: 2px 8px; border-radius: 3px; text-align: center; font-size: 12px; }\n.method-get { background: var(--status-redirect-bg); color: var(--status-redirect-text); }\n.method-post { background: var(--status-success-bg); color: var(--status-success-text); }\n.method-put { background: var(--status-client-error-bg); color: var(--status-client-error-text); }\n.method-delete { background: var(--status-server-error-bg); color: var(--status-server-error-text); }\n.method-patch { background: var(--status-redirect-bg); color: var(--status-redirect-text); }\n.url { color: var(--text-primary); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }\n.status { font-family: 'Courier New', monospace; font-size: 13px; font-weight: 500; padding: 2px 8px; border-radius: 3px; text-align: center; }\n.status-success { background: var(--status-success-bg); color: var(--status-success-text); }\n.status-redirect { background: var(--status-redirect-bg); color: var(--status-redirect-text); }\n.status-client-error { background: var(--status-client-error-bg); color: var(--status-client-error-text); }\n.status-server-error { background: var(--status-server-error-bg); color: var(--status-server-error-text); }\n.size, .duration { font-family: 'Courier New', monospace; font-size: 13px; color: var(--text-secondary); text-align: right; }\n.expand-btn { background: none; border: none; color: var(--text-secondary); font-size: 14px; cursor: pointer; padding: 6px 8px; transition: all 0.2s; min-width: 32px; display: flex; align-items: center; justify-content: center; }\n.expand-btn:hover { color: var(--text-primary); background: var(--button-active-bg); border-radius: 4px; }\n.exchange-detail { padding: 16px; background: var(--bg-tertiary); border-top: 1px solid var(--border-color); }\n.detail-console-container { width: 100%; }\n.duration-view { display: flex; flex-direction: column; }\n.duration-header { display: grid; grid-template-columns: 300px 1fr; border-bottom: 2px solid var(--border-color); background: var(--bg-secondary); font-weight: 600; font-size: 12px; color: var(--text-secondary); padding: 8px 16px; min-height: 46px; align-items: start; }\n.duration-scale-header { padding-left: 16px; }\n.duration-rows { display: flex; flex-direction: column; }\n.duration-row-container { border-bottom: 1px solid var(--border-color); }\n.duration-row-container:last-child { border-bottom: none; }\n.duration-row-container.expanded { background: var(--bg-tertiary); }\n.duration-row { display: grid; grid-template-columns: 300px 1fr; min-height: 40px; transition: background 0.2s; }\n.duration-row:hover { background: var(--bg-secondary); cursor: pointer; }\n.duration-bar-area { position: relative; padding: 8px 16px; background: var(--bg-tertiary); overflow-x: auto; overflow-y: hidden; min-width: 0; }\n.duration-bar { height: 24px; border-radius: 3px; display: flex; align-items: center; padding: 0 8px; box-sizing: border-box; width: calc((var(--duration) / var(--max-duration)) * (100% - 32px)); min-width: 40px; max-width: calc(100% - 16px); }\n.duration-bar.status-success { background: var(--timing-success-bg); border: 1px solid var(--timing-success-border); }\n.duration-bar.status-redirect { background: var(--timing-redirect-bg); border: 1px solid var(--timing-redirect-border); }\n.duration-bar.status-client-error { background: var(--timing-client-error-bg); border: 1px solid var(--timing-client-error-border); }\n.duration-bar.status-server-error { background: var(--timing-server-error-bg); border: 1px solid var(--timing-server-error-border); }\n.waterfall-view { display: flex; flex-direction: column; }\n.timeline-header { display: grid; grid-template-columns: 300px 1fr; border-bottom: 2px solid var(--border-color); background: var(--bg-secondary); font-weight: 600; font-size: 12px; color: var(--text-secondary); min-height: 46px; align-items: start; }\n.request-info-header { padding: 8px 16px; border-right: 1px solid var(--border-color); }\n.timeline-scale { display: flex; position: relative; padding: 8px 16px; min-height: 30px; }\n.time-marker { position: absolute; font-size: 11px; color: var(--text-tertiary); white-space: nowrap; }\n.time-marker:nth-child(1) { left: 16px; }\n.time-marker:nth-child(2) { left: 20%; }\n.time-marker:nth-child(3) { left: 40%; }\n.time-marker:nth-child(4) { left: 60%; }\n.time-marker:nth-child(5) { left: 80%; }\n.waterfall-rows { display: flex; flex-direction: column; }\n.waterfall-row-container { border-bottom: 1px solid var(--border-color); }\n.waterfall-row-container:last-child { border-bottom: none; }\n.waterfall-row-container.expanded { background: var(--bg-tertiary); }\n.waterfall-row { display: grid; grid-template-columns: 300px 1fr; min-height: 40px; transition: background 0.2s; }\n.waterfall-row:hover { background: var(--bg-secondary); cursor: pointer; }\n.request-info { display: flex; align-items: center; gap: 8px; padding: 8px 16px; border-right: 1px solid var(--border-color); background: var(--bg-primary); }\n.url-short { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-size: 13px; color: var(--text-primary); }\n.timing-area { position: relative; padding: 8px 16px; background: var(--bg-tertiary); overflow-x: auto; overflow-y: hidden; min-width: 0; }\n.timing-bar { position: absolute; top: 50%; transform: translateY(-50%); height: 24px; border-radius: 3px; display: flex; align-items: center; padding: 0 8px; box-sizing: border-box; left: calc(16px + (var(--start-offset) / var(--total-duration)) * (100% - 32px)); width: calc((var(--duration) / var(--total-duration)) * (100% - 32px)); min-width: 2px; max-width: calc(100% - 32px); }\n.timing-bar.status-success { background: var(--timing-success-bg); border: 1px solid var(--timing-success-border); }\n.timing-bar.status-redirect { background: var(--timing-redirect-bg); border: 1px solid var(--timing-redirect-border); }\n.timing-bar.status-client-error { background: var(--timing-client-error-bg); border: 1px solid var(--timing-client-error-border); }\n.timing-bar.status-server-error { background: var(--timing-server-error-bg); border: 1px solid var(--timing-server-error-border); }\n.duration-label { font-size: 11px; font-weight: 500; color: var(--text-primary); white-space: nowrap; overflow: hidden; text-overflow: clip; }\n@media (max-width: 900px) { .exchange-summary { grid-template-columns: 60px 1fr 100px 60px 60px 30px; gap: 8px; font-size: 13px; } .duration-row, .duration-header { grid-template-columns: 200px 1fr; } .waterfall-row, .timeline-header { grid-template-columns: 200px 1fr; } }\n\n/* Explorer/Request Builder styles */\n.explorer-panel { background: var(--bg-secondary); border-bottom: 1px solid var(--border-color); padding: 16px; }\n.explorer-toggle { display: flex; align-items: center; gap: 8px; cursor: pointer; color: var(--text-primary); font-weight: 500; font-size: 13px; padding: 8px 12px; background: var(--button-bg); border: 1px solid var(--button-border); border-radius: 4px; transition: all 0.2s; }\n.explorer-toggle:hover { background: var(--button-hover-bg); border-color: var(--button-hover-border); }\n.explorer-toggle.active { background: var(--button-primary-bg); color: white; border-color: var(--button-primary-border); }\n.explorer-content { margin-top: 16px; display: none; }\n.explorer-content.visible { display: block; }\n.request-builder { display: flex; flex-direction: column; gap: 16px; }\n.request-line-builder { display: flex; gap: 12px; align-items: center; }\n.method-select { padding: 10px 12px; border: 1px solid var(--button-border); border-radius: 4px; background: var(--button-bg); color: var(--text-primary); font-size: 14px; font-weight: 600; cursor: pointer; min-width: 100px; }\n.method-select:focus { outline: none; border-color: var(--button-primary-bg); }\n.url-input { flex: 1; padding: 10px 12px; border: 1px solid var(--button-border); border-radius: 4px; background: var(--button-bg); color: var(--text-primary); font-size: 14px; font-family: 'Courier New', monospace; }\n.url-input:focus { outline: none; border-color: var(--button-primary-bg); }\n.send-button { padding: 10px 24px; background: var(--button-primary-bg); color: white; border: none; border-radius: 4px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; }\n.send-button:hover { background: var(--button-primary-hover); }\n.send-button:disabled { opacity: 0.5; cursor: not-allowed; }\n.headers-section { display: flex; flex-direction: column; gap: 8px; }\n.section-label { font-size: 13px; font-weight: 600; color: var(--text-secondary); }\n.headers-list { display: flex; flex-direction: column; gap: 8px; }\n.header-row { display: flex; gap: 8px; align-items: center; }\n.header-input { padding: 8px 10px; border: 1px solid var(--button-border); border-radius: 4px; background: var(--button-bg); color: var(--text-primary); font-size: 13px; font-family: 'Courier New', monospace; }\n.header-input:focus { outline: none; border-color: var(--button-primary-bg); }\n.header-input.name { flex: 1; min-width: 150px; }\n.header-input.value { flex: 2; min-width: 200px; }\n.remove-header-btn { padding: 6px 10px; background: var(--status-server-error-bg); color: var(--status-server-error-text); border: none; border-radius: 4px; font-size: 12px; cursor: pointer; transition: opacity 0.2s; }\n.remove-header-btn:hover { opacity: 0.9; }\n.add-header-btn { padding: 8px 16px; background: var(--bg-primary); color: var(--text-primary); border: 2px dashed var(--button-border); border-radius: 4px; font-size: 13px; cursor: pointer; transition: all 0.2s; }\n.add-header-btn:hover { border-color: var(--button-primary-bg); color: var(--button-primary-bg); }\n.body-section { display: flex; flex-direction: column; gap: 8px; }\n.body-textarea { width: 100%; min-height: 100px; padding: 12px; border: 1px solid var(--button-border); border-radius: 4px; background: var(--button-bg); color: var(--text-primary); font-size: 13px; font-family: 'Courier New', monospace; line-height: 1.5; resize: vertical; box-sizing: border-box; }\n.body-textarea:focus { outline: none; border-color: var(--button-primary-bg); }\n.explorer-status { margin-top: 12px; padding: 12px 16px; border-radius: 4px; font-size: 14px; }\n.explorer-status.loading { background: var(--status-redirect-bg); color: var(--status-redirect-text); }\n.explorer-status.success { background: var(--status-success-bg); color: var(--status-success-text); }\n.explorer-status.error { background: var(--status-server-error-bg); color: var(--status-server-error-text); }\n`;\n\n/**\n * @typedef {Object} HTTPTiming\n * @property {number} startTime - Request start timestamp (milliseconds)\n * @property {number} endTime - Request end timestamp (milliseconds)\n * @property {number} duration - Request duration (milliseconds)\n * @property {Object} [phases] - Optional detailed timing phases\n */\n\n/**\n * @typedef {Object} HTTPExchangeWithTiming\n * @property {Object} request - HTTP request data\n * @property {Object} response - HTTP response data\n * @property {HTTPTiming} timing - Timing information\n */\n\n/**\n * HTTPWaterfallElement - Web component for displaying multiple HTTP exchanges\n * Supports list, duration, and waterfall timeline views with live capture capability\n *\n * @class\n * @extends HTMLElement\n *\n * @example\n * // Static data display\n * const waterfall = document.querySelector('http-waterfall');\n * waterfall.exchanges = [\n *   {\n *     request: { method: 'GET', url: '/api/users' },\n *     response: { status: 200, statusText: 'OK' },\n *     timing: { startTime: 0, endTime: 87, duration: 87 }\n *   }\n * ];\n *\n * @example\n * // Live capture mode\n * <http-waterfall capture=\"true\" filter=\"/api/*\" theme=\"dark\"></http-waterfall>\n */\nclass HTTPWaterfallElement extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this._exchanges = [];\n    this._view = 'duration'; // 'list', 'duration', or 'waterfall'\n    this._expandedRows = new Set();\n    this._capture = false;\n    this._filter = null;\n    this._maxEntries = 100;\n    this._isPaused = false;\n    this._interceptor = null;\n\n    // Explorer (request builder) state\n    this._explorerOpen = false;\n    this._explorerHeaders = [{ name: '', value: '' }];\n    this._explorerLoading = false;\n    this._explorerStatus = null;\n\n    // Handle property shadowing like http-console\n    if (this.hasOwnProperty('exchanges')) {\n      const existingData = this.exchanges;\n      delete this.exchanges;\n      this.exchanges = existingData;\n    }\n  }\n\n  static get observedAttributes() {\n    return ['view', 'requests', 'capture', 'filter', 'max-entries', 'theme', 'explorer'];\n  }\n\n  /**\n   * Called when element is added to the DOM\n   * @memberof HTTPWaterfallElement\n   */\n  connectedCallback() {\n    // Set smart default view if not explicitly set\n    if (!this.hasAttribute('view')) {\n      this._view = this.getSmartDefaultView();\n    }\n\n    // Check if explorer should be open initially\n    this._explorerOpen = this.hasAttribute('explorer');\n\n    // Create initial DOM structure\n    this.shadowRoot.innerHTML = `\n      <style>${HTTP_WATERFALL_STYLES}</style>\n      <div class=\"http-waterfall\">\n        <div class=\"toolbar-container\"></div>\n        <div class=\"explorer-container\"></div>\n        <div class=\"view-container\"></div>\n      </div>\n    `;\n\n    // Cache container references\n    this._toolbarContainer = this.shadowRoot.querySelector('.toolbar-container');\n    this._explorerContainer = this.shadowRoot.querySelector('.explorer-container');\n    this._viewContainer = this.shadowRoot.querySelector('.view-container');\n\n    // Initial render\n    this.renderToolbar();\n    this.renderExplorer();\n    this.renderView();\n    this.updateTheme();\n\n    // Start capturing if enabled\n    if (this._capture) {\n      this.startCapture();\n    }\n  }\n\n  disconnectedCallback() {\n    // Stop capturing when component is removed\n    this.stopCapture();\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue !== newValue) {\n      if (name === 'view') {\n        this._view = newValue || 'list';\n      } else if (name === 'requests') {\n        try {\n          this._exchanges = JSON.parse(newValue) || [];\n        } catch (e) {\n          console.error('Failed to parse requests:', e);\n        }\n      } else if (name === 'capture') {\n        this._capture = newValue === 'true' || newValue === '';\n        if (this._capture && this.isConnected) {\n          this.startCapture();\n        } else {\n          this.stopCapture();\n        }\n      } else if (name === 'filter') {\n        this._filter = newValue;\n        if (this._interceptor) {\n          this._interceptor.filter = newValue;\n        }\n      } else if (name === 'max-entries') {\n        this._maxEntries = parseInt(newValue, 10) || 100;\n      } else if (name === 'theme') {\n        this.updateTheme();\n        return; // Don't re-render for theme changes\n      } else if (name === 'explorer') {\n        this._explorerOpen = newValue !== null;\n        this.renderExplorer();\n        return; // Don't re-render everything for explorer toggle\n      }\n      this.render();\n    }\n  }\n\n  /**\n   * Update theme based on attribute or system preference\n   */\n  updateTheme() {\n    const themeAttr = this.getAttribute('theme');\n\n    if (themeAttr === 'dark' || themeAttr === 'light') {\n      // Explicit theme set\n      this.setAttribute('theme', themeAttr);\n    } else if (themeAttr === 'auto' || !themeAttr) {\n      // Auto-detect from system preferences\n      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n      this.setAttribute('theme', prefersDark ? 'dark' : 'light');\n    }\n\n    // Also update any http-console children\n    this.updateChildThemes();\n  }\n\n  /**\n   * Update theme on child http-transaction/http-console elements\n   */\n  updateChildThemes() {\n    const theme = this.getAttribute('theme');\n    // Support both http-transaction (new) and http-console (backwards compat)\n    const transactions = this.shadowRoot.querySelectorAll('http-transaction, http-console');\n    transactions.forEach(el => {\n      el.setAttribute('theme', theme);\n    });\n  }\n\n  /**\n   * Set HTTP exchanges to display\n   * @param {HTTPExchangeWithTiming[]} value - Array of HTTP exchanges with timing\n   * @memberof HTTPWaterfallElement\n   */\n  set exchanges(value) {\n    this._exchanges = Array.isArray(value) ? value : [];\n    this.render();\n  }\n\n  /**\n   * Get current HTTP exchanges\n   * @returns {HTTPExchangeWithTiming[]} Array of exchanges\n   * @memberof HTTPWaterfallElement\n   */\n  get exchanges() {\n    return this._exchanges;\n  }\n\n  /**\n   * Set current view mode\n   * @param {'list'|'duration'|'waterfall'} value - View mode\n   * @memberof HTTPWaterfallElement\n   */\n  set view(value) {\n    if (this._view !== value) {\n      this._view = value;\n      // Re-render both toolbar (to update active button) and view\n      this.renderToolbar();\n      this.renderView();\n    }\n  }\n\n  /**\n   * Get current view mode\n   * @returns {'list'|'duration'|'waterfall'} Current view mode\n   * @memberof HTTPWaterfallElement\n   */\n  get view() {\n    return this._view;\n  }\n\n  /**\n   * Start capturing live HTTP requests using the interceptor\n   * @memberof HTTPWaterfallElement\n   */\n  startCapture() {\n    if (this._interceptor) return; // Already capturing\n\n    this._interceptor = new HTTPInterceptor();\n    this._interceptor.start(\n      exchange => {\n        this.addCapturedExchange(exchange);\n      },\n      {\n        filter: this._filter,\n      }\n    );\n  }\n\n  /**\n   * Stop capturing\n   */\n  stopCapture() {\n    if (this._interceptor) {\n      this._interceptor.stop();\n      this._interceptor = null;\n    }\n  }\n\n  /**\n   * Pause/resume capturing\n   */\n  togglePause() {\n    if (!this._interceptor) return;\n\n    this._isPaused = !this._isPaused;\n    if (this._isPaused) {\n      this._interceptor.pause();\n    } else {\n      this._interceptor.resume();\n    }\n    // Only re-render toolbar to update pause button and indicator\n    this.renderToolbar();\n  }\n\n  /**\n   * Clear all captured exchanges\n   */\n  clearExchanges() {\n    this._exchanges = [];\n    this._expandedRows.clear();\n    // Update view and request count\n    this.renderView();\n    this.updateRequestCount();\n  }\n\n  /**\n   * Determine if requests are clustered (within 10 seconds of each other)\n   */\n  areRequestsClustered() {\n    if (this._exchanges.length < 2) return false;\n\n    const times = this._exchanges.map(e => e.timing?.startTime || 0).filter(t => t > 0);\n\n    if (times.length === 0) return false;\n\n    const min = Math.min(...times);\n    const max = Math.max(...times);\n\n    // Clustered if all requests within 10 seconds\n    return max - min < 10000;\n  }\n\n  /**\n   * Get smart default view based on context\n   */\n  getSmartDefaultView() {\n    // Live capture always defaults to duration (independent requests)\n    if (this._capture) {\n      return 'duration';\n    }\n\n    // Static data: waterfall if clustered, duration if dispersed\n    if (this.areRequestsClustered()) {\n      return 'waterfall';\n    }\n\n    return 'duration';\n  }\n\n  /**\n   * Add a captured exchange\n   */\n  addCapturedExchange(exchange) {\n    // Add to beginning of array (most recent first)\n    this._exchanges.unshift(exchange);\n\n    // Limit to max entries\n    if (this._exchanges.length > this._maxEntries) {\n      this._exchanges = this._exchanges.slice(0, this._maxEntries);\n    }\n\n    // Only update the view content, not the toolbar\n    this.renderView();\n\n    // Update just the request count in toolbar\n    this.updateRequestCount();\n  }\n\n  toggleRow(index) {\n    if (this._expandedRows.has(index)) {\n      this._expandedRows.delete(index);\n    } else {\n      this._expandedRows.add(index);\n    }\n    // Only re-render the view content\n    this.renderView();\n  }\n\n  render() {\n    // Only render if connected\n    if (!this._toolbarContainer || !this._viewContainer) return;\n\n    this.renderToolbar();\n    this.renderView();\n  }\n\n  renderView() {\n    if (!this._viewContainer) return;\n\n    let view;\n    if (this._view === 'waterfall') {\n      view = this.renderWaterfallView();\n    } else if (this._view === 'duration') {\n      view = this.renderDurationView();\n    } else {\n      view = this.renderListView();\n    }\n\n    this._viewContainer.innerHTML = view;\n\n    // Attach event listeners for view (expand buttons)\n    this.attachViewEventListeners();\n  }\n\n  renderToolbar() {\n    if (!this._toolbarContainer) return;\n\n    const captureControls = this._capture\n      ? `\n      <div class=\"capture-controls\">\n        <button class=\"control-btn pause-btn\" title=\"${this._isPaused ? 'Resume' : 'Pause'}\">\n          ${this._isPaused ? '' : ''}\n        </button>\n        <button class=\"control-btn clear-btn\" title=\"Clear all\">\n          \n        </button>\n        <span class=\"capture-indicator ${this._isPaused ? 'paused' : 'active'}\">\n          ${this._isPaused ? 'Paused' : 'Capturing'}\n        </span>\n      </div>\n    `\n      : '';\n\n    this._toolbarContainer.innerHTML = `\n      <div class=\"toolbar\">\n        <div class=\"view-toggle\">\n          <button class=\"view-btn ${this._view === 'list' ? 'active' : ''}\" data-view=\"list\">List</button>\n          <button class=\"view-btn ${this._view === 'duration' ? 'active' : ''}\" data-view=\"duration\">Duration</button>\n          <button class=\"view-btn ${this._view === 'waterfall' ? 'active' : ''}\" data-view=\"waterfall\">Waterfall</button>\n        </div>\n        ${captureControls}\n        <div class=\"info\">\n          ${this._exchanges.length} request${this._exchanges.length !== 1 ? 's' : ''}\n        </div>\n      </div>\n    `;\n\n    // Attach toolbar event listeners\n    this.attachToolbarEventListeners();\n  }\n\n  renderListView() {\n    if (this._exchanges.length === 0) {\n      return '<div class=\"empty\">No requests to display</div>';\n    }\n\n    return `\n      <div class=\"list-view\">\n        ${this._exchanges.map((exchange, index) => this.renderExchangeRow(exchange, index)).join('')}\n      </div>\n    `;\n  }\n\n  renderExchangeRow(exchange, index) {\n    const { request, response, timing } = exchange;\n    const isExpanded = this._expandedRows.has(index);\n    const method = request?.method || '?';\n    const url = request?.url || '';\n    const status = response?.status || 0;\n    const statusText = response?.statusText || '';\n    const duration = timing?.duration || 0;\n\n    // Calculate response size (rough estimate from body length)\n    const bodySize = response?.body?.length || 0;\n    const size = this.formatSize(bodySize);\n\n    const statusClass = this.getStatusClass(status);\n\n    return `\n      <div class=\"exchange-row ${isExpanded ? 'expanded' : ''}\" data-index=\"${index}\">\n        <div class=\"exchange-summary\">\n          <span class=\"method method-${method.toLowerCase()}\">${method}</span>\n          <span class=\"url\" title=\"${this.escapeHtml(url)}\">${this.escapeHtml(url)}</span>\n          <span class=\"status ${statusClass}\">${status} ${statusText}</span>\n          <span class=\"size\">${size}</span>\n          <span class=\"duration\">${duration}ms</span>\n          <button class=\"expand-btn\" data-index=\"${index}\">\n            ${isExpanded ? '' : ''}\n          </button>\n        </div>\n        ${isExpanded ? this.renderExchangeDetail(exchange) : ''}\n      </div>\n    `;\n  }\n\n  renderExchangeDetail(exchange) {\n    const { request, response } = exchange;\n    // Create a unique ID for this detail element\n    const detailId = `detail-${Math.random().toString(36).substr(2, 9)}`;\n\n    // Return placeholder that will be populated with http-transaction element\n    setTimeout(() => {\n      const detailElement = this.shadowRoot.getElementById(detailId);\n      if (detailElement) {\n        const transactionElement = document.createElement('http-transaction');\n        transactionElement.data = { request, response };\n        // Apply theme to child transaction\n        const theme = this.getAttribute('theme');\n        if (theme) {\n          transactionElement.setAttribute('theme', theme);\n        }\n        detailElement.appendChild(transactionElement);\n      }\n    }, 0);\n\n    return `\n      <div class=\"exchange-detail\">\n        <div id=\"${detailId}\" class=\"detail-console-container\"></div>\n      </div>\n    `;\n  }\n\n  renderDurationView() {\n    if (this._exchanges.length === 0) {\n      return '<div class=\"empty\">No requests to display</div>';\n    }\n\n    // Get max duration for scaling\n    const maxDuration = this.getMaxDuration();\n\n    if (maxDuration === 0) {\n      return '<div class=\"empty\">No duration data available</div>';\n    }\n\n    return `\n      <div class=\"duration-view\">\n        <div class=\"duration-header\">\n          <div class=\"request-info-header\">Request</div>\n          <div class=\"duration-scale-header\">Duration</div>\n        </div>\n        <div class=\"duration-rows\">\n          ${this._exchanges\n            .map((exchange, index) => this.renderDurationRow(exchange, index, maxDuration))\n            .join('')}\n        </div>\n      </div>\n    `;\n  }\n\n  renderDurationRow(exchange, index, maxDuration) {\n    const { request, response, timing } = exchange;\n    const method = request?.method || '?';\n    const url = request?.url || '';\n    const status = response?.status || 0;\n    const statusText = response?.statusText || '';\n    const duration = timing?.duration || 0;\n    const isExpanded = this._expandedRows.has(index);\n\n    const statusClass = this.getStatusClass(status);\n    const tooltip = `${method} ${url}\\nStatus: ${status} ${statusText}\\nDuration: ${duration}ms`;\n\n    return `\n      <div class=\"duration-row-container ${isExpanded ? 'expanded' : ''}\">\n        <div class=\"duration-row\">\n          <div class=\"request-info\">\n            <span class=\"method method-${method.toLowerCase()}\">${method}</span>\n            <span class=\"url-short\" title=\"${this.escapeHtml(url)}\">${this.escapeHtml(this.shortenUrl(url))}</span>\n            <span class=\"status ${statusClass}\">${status}</span>\n            <button class=\"expand-btn\" data-index=\"${index}\">\n              ${isExpanded ? '' : ''}\n            </button>\n          </div>\n          <div class=\"duration-bar-area\">\n            <div class=\"duration-bar ${statusClass}\"\n                 title=\"${this.escapeHtml(tooltip)}\"\n                 style=\"--duration: ${duration}; --max-duration: ${maxDuration}\">\n              <span class=\"duration-label\">${duration}ms</span>\n            </div>\n          </div>\n        </div>\n        ${isExpanded ? this.renderExchangeDetail(exchange) : ''}\n      </div>\n    `;\n  }\n\n  getMaxDuration() {\n    if (this._exchanges.length === 0) return 0;\n\n    const durations = this._exchanges.map(e => e.timing?.duration || 0).filter(d => d > 0);\n\n    return durations.length > 0 ? Math.max(...durations) : 0;\n  }\n\n  renderWaterfallView() {\n    if (this._exchanges.length === 0) {\n      return '<div class=\"empty\">No requests to display</div>';\n    }\n\n    // Calculate timing metadata\n    const startTimes = this._exchanges.map(e => e.timing?.startTime || 0).filter(t => t > 0);\n    const endTimes = this._exchanges.map(e => e.timing?.endTime || 0).filter(t => t > 0);\n\n    if (startTimes.length === 0) {\n      return '<div class=\"empty\">No timing data available for waterfall view</div>';\n    }\n\n    const baseTime = Math.min(...startTimes);\n    const maxTime = Math.max(...endTimes);\n    const totalDuration = maxTime - baseTime;\n\n    return `\n      <div class=\"waterfall-view\">\n        ${this.renderTimelineHeader(totalDuration)}\n        <div class=\"waterfall-rows\">\n          ${this._exchanges\n            .map((exchange, index) =>\n              this.renderWaterfallRow(exchange, index, baseTime, totalDuration)\n            )\n            .join('')}\n        </div>\n      </div>\n    `;\n  }\n\n  renderTimelineHeader(totalDuration) {\n    // Create exactly 5 time markers evenly spaced across the timeline\n    const markers = [];\n    const positions = [0, 0.25, 0.5, 0.75, 1.0];\n\n    for (let i = 0; i < positions.length; i++) {\n      const time = Math.round(totalDuration * positions[i]);\n      markers.push(`<span class=\"time-marker\">${time}ms</span>`);\n    }\n\n    return `\n      <div class=\"timeline-header\">\n        <div class=\"request-info-header\">Request</div>\n        <div class=\"timeline-scale\">${markers.join('')}</div>\n      </div>\n    `;\n  }\n\n  renderWaterfallRow(exchange, index, baseTime, totalDuration) {\n    const { request, response, timing } = exchange;\n    const method = request?.method || '?';\n    const url = request?.url || '';\n    const status = response?.status || 0;\n    const statusText = response?.statusText || '';\n    const duration = timing?.duration || 0;\n    const startTime = timing?.startTime || 0;\n    const isExpanded = this._expandedRows.has(index);\n\n    // Calculate offset from base time\n    const offset = startTime - baseTime;\n    const statusClass = this.getStatusClass(status);\n    const tooltip = `${method} ${url}\\nStatus: ${status} ${statusText}\\nStart: ${offset}ms\\nDuration: ${duration}ms`;\n\n    return `\n      <div class=\"waterfall-row-container ${isExpanded ? 'expanded' : ''}\">\n        <div class=\"waterfall-row\">\n          <div class=\"request-info\">\n            <span class=\"method method-${method.toLowerCase()}\">${method}</span>\n            <span class=\"url-short\" title=\"${this.escapeHtml(url)}\">${this.escapeHtml(this.shortenUrl(url))}</span>\n            <span class=\"status ${statusClass}\">${status}</span>\n            <button class=\"expand-btn\" data-index=\"${index}\">\n              ${isExpanded ? '' : ''}\n            </button>\n          </div>\n          <div class=\"timing-area\">\n            <div class=\"timing-bar ${statusClass}\"\n                 title=\"${this.escapeHtml(tooltip)}\"\n                 style=\"--start-offset: ${offset}; --duration: ${duration}; --total-duration: ${totalDuration}\">\n              <span class=\"duration-label\">${duration}ms</span>\n            </div>\n          </div>\n        </div>\n        ${isExpanded ? this.renderExchangeDetail(exchange) : ''}\n      </div>\n    `;\n  }\n\n  calculateTimeInterval(totalDuration) {\n    // Choose appropriate interval based on total duration\n    if (totalDuration <= 500) return 100;\n    if (totalDuration <= 1000) return 200;\n    if (totalDuration <= 5000) return 500;\n    return 1000;\n  }\n\n  shortenUrl(url) {\n    if (url.length > 40) {\n      return url.substring(0, 37) + '...';\n    }\n    return url;\n  }\n\n  getStatusClass(status) {\n    if (status >= 200 && status < 300) return 'status-success';\n    if (status >= 300 && status < 400) return 'status-redirect';\n    if (status >= 400 && status < 500) return 'status-client-error';\n    if (status >= 500) return 'status-server-error';\n    return '';\n  }\n\n  formatSize(bytes) {\n    if (bytes === 0) return '0 B';\n    if (bytes < 1024) return bytes + ' B';\n    if (bytes < 1024 * 1024) return Math.round(bytes / 1024) + ' KB';\n    return Math.round(bytes / (1024 * 1024)) + ' MB';\n  }\n\n  escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  /**\n   * Update just the request count without re-rendering toolbar\n   */\n  updateRequestCount() {\n    const infoElement = this.shadowRoot.querySelector('.info');\n    if (infoElement) {\n      infoElement.textContent = `${this._exchanges.length} request${this._exchanges.length !== 1 ? 's' : ''}`;\n    }\n  }\n\n  attachToolbarEventListeners() {\n    // View toggle buttons\n    const viewBtns = this.shadowRoot.querySelectorAll('.view-btn');\n    viewBtns.forEach(btn => {\n      btn.addEventListener('click', () => {\n        this.view = btn.dataset.view;\n      });\n    });\n\n    // Pause/Resume button\n    const pauseBtn = this.shadowRoot.querySelector('.pause-btn');\n    if (pauseBtn) {\n      pauseBtn.addEventListener('click', () => {\n        this.togglePause();\n      });\n    }\n\n    // Clear button\n    const clearBtn = this.shadowRoot.querySelector('.clear-btn');\n    if (clearBtn) {\n      clearBtn.addEventListener('click', () => {\n        if (confirm('Clear all captured requests?')) {\n          this.clearExchanges();\n        }\n      });\n    }\n  }\n\n  attachViewEventListeners() {\n    // Expand/collapse buttons (only in list view)\n    const expandBtns = this.shadowRoot.querySelectorAll('.expand-btn');\n    expandBtns.forEach(btn => {\n      btn.addEventListener('click', e => {\n        e.stopPropagation();\n        const index = parseInt(btn.dataset.index, 10);\n        this.toggleRow(index);\n      });\n    });\n  }\n\n  // ===== Explorer (Request Builder) Methods =====\n\n  /**\n   * Toggle the explorer panel open/closed\n   */\n  toggleExplorer() {\n    this._explorerOpen = !this._explorerOpen;\n    this.renderExplorer();\n  }\n\n  /**\n   * Render the explorer/request builder panel\n   */\n  renderExplorer() {\n    if (!this._explorerContainer) return;\n\n    this._explorerContainer.innerHTML = `\n      <div class=\"explorer-panel\">\n        <button class=\"explorer-toggle ${this._explorerOpen ? 'active' : ''}\">\n          ${this._explorerOpen ? '\\u25BC' : '\\u25B6'} Request Builder\n        </button>\n        <div class=\"explorer-content ${this._explorerOpen ? 'visible' : ''}\">\n          ${this.renderExplorerContent()}\n        </div>\n      </div>\n    `;\n\n    this.attachExplorerEventListeners();\n  }\n\n  /**\n   * Render the explorer form content\n   * @returns {string} HTML content\n   */\n  renderExplorerContent() {\n    const statusHtml = this._explorerStatus\n      ? `<div class=\"explorer-status ${this._explorerStatus.type}\">${this._explorerStatus.message}</div>`\n      : '';\n\n    return `\n      <div class=\"request-builder\">\n        <div class=\"request-line-builder\">\n          <select class=\"method-select\" id=\"explorer-method\">\n            <option value=\"GET\">GET</option>\n            <option value=\"POST\">POST</option>\n            <option value=\"PUT\">PUT</option>\n            <option value=\"PATCH\">PATCH</option>\n            <option value=\"DELETE\">DELETE</option>\n            <option value=\"HEAD\">HEAD</option>\n            <option value=\"OPTIONS\">OPTIONS</option>\n          </select>\n          <input type=\"text\" class=\"url-input\" id=\"explorer-url\" placeholder=\"https://api.example.com/endpoint\" />\n          <button class=\"send-button\" id=\"explorer-send\" ${this._explorerLoading ? 'disabled' : ''}>\n            ${this._explorerLoading ? 'Sending...' : 'Send'}\n          </button>\n        </div>\n\n        <div class=\"headers-section\">\n          <div class=\"section-label\">Headers</div>\n          <div class=\"headers-list\" id=\"explorer-headers\">\n            ${this._explorerHeaders.map((h, i) => this.renderHeaderRow(h, i)).join('')}\n          </div>\n          <button class=\"add-header-btn\" id=\"explorer-add-header\">+ Add Header</button>\n        </div>\n\n        <div class=\"body-section\">\n          <div class=\"section-label\">Request Body</div>\n          <textarea class=\"body-textarea\" id=\"explorer-body\" placeholder=\"Enter request body (JSON, XML, etc.)\"></textarea>\n        </div>\n\n        ${statusHtml}\n      </div>\n    `;\n  }\n\n  /**\n   * Render a single header row\n   * @param {Object} header - Header object with name and value\n   * @param {number} index - Row index\n   * @returns {string} HTML content\n   */\n  renderHeaderRow(header, index) {\n    return `\n      <div class=\"header-row\" data-index=\"${index}\">\n        <input type=\"text\" class=\"header-input name\" placeholder=\"Header name\" value=\"${this.escapeHtml(header.name)}\" data-index=\"${index}\" />\n        <input type=\"text\" class=\"header-input value\" placeholder=\"Header value\" value=\"${this.escapeHtml(header.value)}\" data-index=\"${index}\" />\n        <button class=\"remove-header-btn\" data-index=\"${index}\">\\u00D7</button>\n      </div>\n    `;\n  }\n\n  /**\n   * Attach event listeners for the explorer panel\n   */\n  attachExplorerEventListeners() {\n    const toggleBtn = this.shadowRoot.querySelector('.explorer-toggle');\n    if (toggleBtn) {\n      toggleBtn.addEventListener('click', () => this.toggleExplorer());\n    }\n\n    const sendBtn = this.shadowRoot.querySelector('#explorer-send');\n    if (sendBtn) {\n      sendBtn.addEventListener('click', () => this.sendExplorerRequest());\n    }\n\n    const addHeaderBtn = this.shadowRoot.querySelector('#explorer-add-header');\n    if (addHeaderBtn) {\n      addHeaderBtn.addEventListener('click', () => this.addExplorerHeader());\n    }\n\n    const headersList = this.shadowRoot.querySelector('#explorer-headers');\n    if (headersList) {\n      headersList.addEventListener('input', e => {\n        if (e.target.classList.contains('header-input')) {\n          this.updateExplorerHeader(e.target);\n        }\n      });\n      headersList.addEventListener('click', e => {\n        if (e.target.classList.contains('remove-header-btn')) {\n          this.removeExplorerHeader(parseInt(e.target.dataset.index, 10));\n        }\n      });\n    }\n  }\n\n  /**\n   * Add a new header row to the explorer\n   */\n  addExplorerHeader() {\n    this._explorerHeaders.push({ name: '', value: '' });\n    this.renderExplorer();\n  }\n\n  /**\n   * Update a header value in the explorer\n   * @param {HTMLInputElement} input - Input element\n   */\n  updateExplorerHeader(input) {\n    const index = parseInt(input.dataset.index, 10);\n    const field = input.classList.contains('name') ? 'name' : 'value';\n    this._explorerHeaders[index][field] = input.value;\n  }\n\n  /**\n   * Remove a header row from the explorer\n   * @param {number} index - Header index\n   */\n  removeExplorerHeader(index) {\n    this._explorerHeaders.splice(index, 1);\n    if (this._explorerHeaders.length === 0) {\n      this._explorerHeaders.push({ name: '', value: '' });\n    }\n    this.renderExplorer();\n  }\n\n  /**\n   * Send the request built in the explorer\n   */\n  async sendExplorerRequest() {\n    const methodSelect = this.shadowRoot.querySelector('#explorer-method');\n    const urlInput = this.shadowRoot.querySelector('#explorer-url');\n    const bodyTextarea = this.shadowRoot.querySelector('#explorer-body');\n\n    const method = methodSelect.value;\n    const url = urlInput.value.trim();\n    const bodyText = bodyTextarea.value.trim();\n\n    // Validation\n    if (!url) {\n      this._explorerStatus = { type: 'error', message: 'Please enter a URL' };\n      this.renderExplorer();\n      return;\n    }\n\n    try {\n      new URL(url);\n    } catch {\n      this._explorerStatus = { type: 'error', message: 'Invalid URL format' };\n      this.renderExplorer();\n      return;\n    }\n\n    // Build headers object\n    const headers = {};\n    this._explorerHeaders.forEach(header => {\n      if (header.name && header.value) {\n        headers[header.name] = header.value;\n      }\n    });\n\n    // Set loading state\n    this._explorerLoading = true;\n    this._explorerStatus = { type: 'loading', message: 'Sending request...' };\n    this.renderExplorer();\n\n    const startTime = performance.now();\n\n    try {\n      // Build fetch options\n      const options = { method, headers };\n\n      // Add body for methods that support it\n      if (['POST', 'PUT', 'PATCH'].includes(method) && bodyText) {\n        options.body = bodyText;\n      }\n\n      // Dispatch event for request sent\n      this.dispatchEvent(\n        new CustomEvent('request-sent', {\n          detail: { method, url, headers, body: bodyText },\n        })\n      );\n\n      // Send request\n      const response = await fetch(url, options);\n      const endTime = performance.now();\n      const duration = Math.round(endTime - startTime);\n\n      // Extract response data\n      const responseHeaders = {};\n      response.headers.forEach((value, key) => {\n        responseHeaders[key] = value;\n      });\n\n      let responseBody = null;\n      const contentType = response.headers.get('content-type') || '';\n\n      try {\n        if (contentType.includes('application/json')) {\n          const json = await response.json();\n          responseBody = JSON.stringify(json, null, 2);\n        } else {\n          responseBody = await response.text();\n        }\n      } catch {\n        responseBody = '[Could not read response body]';\n      }\n\n      // Create exchange and add to list\n      const exchange = {\n        request: {\n          method,\n          url,\n          httpVersion: 'HTTP/1.1',\n          headers,\n          body: bodyText || null,\n        },\n        response: {\n          status: response.status,\n          statusText: response.statusText,\n          httpVersion: 'HTTP/1.1',\n          headers: responseHeaders,\n          body: responseBody,\n        },\n        timing: {\n          startTime,\n          endTime,\n          duration,\n        },\n      };\n\n      // Add to exchanges\n      this._exchanges.unshift(exchange);\n      if (this._exchanges.length > this._maxEntries) {\n        this._exchanges = this._exchanges.slice(0, this._maxEntries);\n      }\n\n      this._explorerLoading = false;\n      this._explorerStatus = {\n        type: 'success',\n        message: `Request completed in ${duration}ms - ${response.status} ${response.statusText}`,\n      };\n\n      // Dispatch event for response received\n      this.dispatchEvent(\n        new CustomEvent('response-received', {\n          detail: exchange,\n        })\n      );\n\n      this.renderExplorer();\n      this.renderView();\n      this.updateRequestCount();\n    } catch (error) {\n      const endTime = performance.now();\n      const duration = Math.round(endTime - startTime);\n\n      this._explorerLoading = false;\n      this._explorerStatus = {\n        type: 'error',\n        message: `Request failed: ${error.message}`,\n      };\n\n      // Create error exchange\n      const exchange = {\n        request: {\n          method,\n          url,\n          httpVersion: 'HTTP/1.1',\n          headers,\n          body: bodyText || null,\n        },\n        response: {\n          status: 0,\n          statusText: 'Network Error',\n          httpVersion: 'HTTP/1.1',\n          headers: {},\n          body: JSON.stringify({ error: error.message }),\n        },\n        timing: {\n          startTime,\n          endTime,\n          duration,\n        },\n      };\n\n      // Add error exchange to list\n      this._exchanges.unshift(exchange);\n\n      // Dispatch error event\n      this.dispatchEvent(\n        new CustomEvent('request-error', {\n          detail: { error: error.message },\n        })\n      );\n\n      this.renderExplorer();\n      this.renderView();\n      this.updateRequestCount();\n    }\n  }\n}\n\n// Register the custom element\ncustomElements.define('http-waterfall', HTTPWaterfallElement);\n\nexport { HTTPWaterfallElement };\n"],"names":["HTTP_MESSAGE_STYLES","HTTPMessageElement","existingHeaders","existingBody","name","oldValue","newValue","themeAttr","prefersDark","value","headersHtml","bodyHtml","content","key","headerLine","text","div","parts","mediaType","params","p","result","headers","contentType","type","body","bodyStr","size","sizeStr","parsed","e","obj","indent","indentStr","nextIndent","item","keys","html","match","open","tag","attrs","close","highlightedTag","highlightedAttrs","css","selector","brace","js","placeholders","id","keywords","replacement","HTTP_REQUEST_STYLES","HTTPRequestElement","existingData","requestAttr","highlightAttr","sections","allHeaders","specificHeaders","part","headerName","section","highlighted","boxAttr","request","showHeader","method","url","httpVersion","requestLine","lineHighlighted","boxed","headersContent","isHeaderHl","isHeaderBoxed","processedLine","bodyContent","bodyHighlighted","bodyBoxed","processedBody","HTTP_RESPONSE_STYLES","HTTPResponseElement","responseAttr","status","response","statusText","statusClass","statusLine","HTTP_TRANSACTION_STYLES","HTTPTransactionElement","theme","requests","responses","el","requestHighlights","responseHighlights","s","requestBoxes","responseBoxes","data","hasRequest","hasResponse","highlightConfig","boxConfig","requestEl","responseEl","HTTPInterceptor","callback","options","exchange","listener","error","pattern","interceptor","args","startTime","resource","init","endTime","clone","responseData","xhr","requestData","originalOpen","originalSetRequestHeader","originalSend","responseHeaders","headerString","line","_contentType","httpInterceptor","HTTP_WATERFALL_STYLES","HTTPWaterfallElement","times","_a","t","min","index","view","captureControls","timing","isExpanded","duration","bodySize","detailId","detailElement","transactionElement","maxDuration","tooltip","durations","d","startTimes","endTimes","baseTime","totalDuration","markers","positions","i","time","offset","bytes","infoElement","btn","pauseBtn","clearBtn","statusHtml","h","header","toggleBtn","sendBtn","addHeaderBtn","headersList","input","field","methodSelect","urlInput","bodyTextarea","bodyText","responseBody","json"],"mappings":"AAIK,MAACA,IAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA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AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmQ5B,MAAMC,UAA2B,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,EAK3C,cAAc;AAMZ,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"}